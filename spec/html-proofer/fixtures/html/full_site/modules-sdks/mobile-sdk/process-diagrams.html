<!DOCTYPE html>
<html lang="en-US">

    <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="theme-color" content="#000">
        <meta name="application-name" content="Process Diagrams">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <meta name="apple-mobile-web-app-title" content="Process Diagrams">
        <meta name="msapplication-TileColor" content="#000">
        <meta name="msapplication-TileImage" content="/icons/mstile-144x144.png">
        <meta property="og:type" value="website">
        <meta property="og:url" value="/modules-sdks/mobile-sdk/process-diagrams.html">
        <meta property="og:title" value="Mobile-sdk – Process Diagrams">
        <meta name="title" content="Mobile-sdk – Process Diagrams">
        <meta property="og:description" value="Swedbank Pay Developer Portal">
        <meta name="description" content="Swedbank Pay Developer Portal">
        <meta property="og:image" value="/assets/img/swedbank-pay-developer-portal.png">
        <title>Mobile-sdk – Process Diagrams</title>
        <link rel="stylesheet" href="https://design.swedbankpay.com/v/4.7.0/styles/dg-style.css">
        <link rel="stylesheet" href="/assets/css/style.css">
        <link rel="stylesheet" href="/assets/css/pygments-autumn.css">
        <link rel="shortcut icon" href="https://design.swedbankpay.com/v/4.7.0/icons/favicon.ico">
        <link rel="icon" type="image/png" sizes="16x16" href="https://design.swedbankpay.com/v/4.7.0/icons/favicon-16x16.png">
        <link rel="icon" type="image/png" sizes="32x32" href="https://design.swedbankpay.com/v/4.7.0/icons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="228x228" href="https://design.swedbankpay.com/v/4.7.0/icons/coast-228x228.png">
        <link href="https://fonts.googleapis.com/css?family=Material+Icons+Outlined" rel="stylesheet">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Process Diagrams">
<link rel="apple-touch-icon" sizes="57x57" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="167x167" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-icon-167x167.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-icon-180x180.png">
<link rel="apple-touch-icon" sizes="1024x1024" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-icon-1024x1024.png">
<link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 480px) and (orientation: ) and (-webkit-device-pixel-ratio: 1)" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-startup-image-320x460.png">
<link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 480px) and (orientation: ) and (-webkit-device-pixel-ratio: 2)" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-startup-image-640x920.png">
<link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (orientation: ) and (-webkit-device-pixel-ratio: 2)" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-startup-image-640x1096.png">
<link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (orientation: ) and (-webkit-device-pixel-ratio: 2)" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-startup-image-750x1294.png">
<link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 3)" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-startup-image-1182x2208.png">
<link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 3)" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-startup-image-1242x2148.png">
<link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 1)" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-startup-image-748x1024.png">
<link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 1)" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-startup-image-768x1004.png">
<link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 2)" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-startup-image-1496x2048.png">
<link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 2)" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-startup-image-1536x2008.png">
<script src="/assets/js/mermaid.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        <script src="/assets/tipuesearch/tipuesearch_content.js"></script>
        <script src="/assets/tipuesearch/tipuesearch_set.js"></script>
        <script src="/assets/tipuesearch/tipuesearch.min.js"></script>
    </head>

    <body>
        <div id="designguide">
            <div class="documentation">
                <div class="row">
                    <div class="col-xxl-2 col-lg-3 pr-0">
                        <div class="sidebar dg-sidebar">
                            <nav class="sidebar-nav">
                                <a href="/" class="sidebar-header">
                                    <img src="https://design.swedbankpay.com/v/4.7.0/img/swedbankpay-logo-v.svg" alt="Swedbank Pay vertical logo">
                                    <div class="sidebar-header-text">
                                        <span>{</span>developer portal<span>}</span>
                                    </div>
                                </a>

                                <ul id="dx-sidebar-main-nav-ul" class="main-nav-ul">
<li class="nav-group">
<div class="nav-group-heading">
<i class="material-icons">arrow_right</i><span>Checkout </span>
</div>
<ul class="nav-ul">
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/checkout/"> Introduction</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/checkout/#prerequisites">Prerequisites</a></li>
<li class="nav-leaf"><a href="/checkout/#introduction">Introduction</a></li>
<li class="nav-leaf"><a href="/checkout/#languages">Languages</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/checkout/after-payment"> After Payment</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/checkout/after-payment#operations">Operations</a></li>
<li class="nav-leaf"><a href="/checkout/after-payment#cancel">Cancel</a></li>
<li class="nav-leaf"><a href="/checkout/after-payment#reversal">Reversal</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/checkout/capture"> Capture</a>
</div>
<ul class="nav-ul"><li class="nav-leaf"><a href="/checkout/capture#step-5-capture-the-funds">Step 5: Capture the funds</a></li></ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/checkout/checkin"> Checkin</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/checkout/checkin#step-1-initiate-session-for-consumer-identification">Step 1: Initiate session for consumer identification</a></li>
<li class="nav-leaf"><a href="/checkout/checkin#step-2-display-swedbank-pay-checkin-module">Step 2: Display Swedbank Pay Checkin module</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/checkout/other-features"> Other Features</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/checkout/other-features#payment-orders">Payment Orders</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#description">Description</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#payment-url-1">Payment Url</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#operations">Operations</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#completeurl">CompleteUrl</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#recurring-payments">Recurring Payments</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#purchase-payments">Purchase Payments</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#verify-payments">Verify Payments</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#payments-resource">Payments Resource</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#prices">Prices</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#custom-logo">Custom Logo</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#checkin-events">Checkin Events</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#payment-menu-events">Payment Menu Events</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#callback">Callback</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#problems">Problems</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#payeeinfo">PayeeInfo</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#payee-reference">Payee Reference</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#merchant-authenticated-consumer">Merchant Authenticated Consumer</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#merchant-identified-payer">Merchant Identified Payer</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#metadata">Metadata</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#settlement-and-reconciliation">Settlement and Reconciliation</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#3-d-secure-2">3-D Secure 2</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#updating-payment-menu">Updating Payment Menu</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/checkout/payment-menu"> Payment Menu</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/checkout/payment-menu#step-3-create-payment-order">Step 3: Create Payment Order</a></li>
<li class="nav-leaf"><a href="/checkout/payment-menu#payment-url">Payment Url</a></li>
<li class="nav-leaf"><a href="/checkout/payment-menu#step-4-display-the-payment-menu">Step 4: Display the Payment Menu</a></li>
</ul>
</li>
</ul>
</li>
<li class="nav-group">
<div class="nav-group-heading">
<i class="material-icons">arrow_right</i><span>Gift Cards </span>
</div>
<ul class="nav-ul">
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/gift-cards/"> Introduction</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/gift-cards/#overview">Overview</a></li>
<li class="nav-leaf"><a href="/gift-cards/#prerequisites">Prerequisites</a></li>
<li class="nav-leaf"><a href="/gift-cards/#implementation">Implementation</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/gift-cards/operations"> Operations</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/gift-cards/operations#gift-card-resource">Gift card resource</a></li>
<li class="nav-leaf"><a href="/gift-cards/operations#get-new-gift-card">Get New Gift Card</a></li>
<li class="nav-leaf"><a href="/gift-cards/operations#pre-deposit">Pre Deposit</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/gift-cards/other-features"> Other Features</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/gift-cards/other-features#purchase">Purchase</a></li>
<li class="nav-leaf"><a href="/gift-cards/other-features#deposit">Deposit</a></li>
<li class="nav-leaf"><a href="/gift-cards/other-features#balance">Balance</a></li>
<li class="nav-leaf"><a href="/gift-cards/other-features#authentication">Authentication</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/gift-cards/payment-client">Test Client</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/gift-cards/payment-client#prerequisites">Prerequisites</a></li>
<li class="nav-leaf"><a href="/gift-cards/payment-client#project-setup">Project setup</a></li>
<li class="nav-leaf"><a href="/gift-cards/payment-client#first-app-run">First App run</a></li>
<li class="nav-leaf"><a href="/gift-cards/payment-client#testing-application">Testing application</a></li>
<li class="nav-leaf"><a href="/gift-cards/payment-client#build-docker-image">Build docker image</a></li>
<li class="nav-leaf"><a href="/gift-cards/payment-client#deploy-to-local-docker">Deploy to local docker</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/gift-cards/security"> Security</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/gift-cards/security#oauth2">OAuth2</a></li>
<li class="nav-leaf"><a href="/gift-cards/security#hmac">HMAC</a></li>
<li class="nav-leaf"><a href="/gift-cards/security#security-documentation">Security Documentation</a></li>
<li class="nav-leaf"><a href="/gift-cards/security#test-client">Test client</a></li>
</ul>
</li>
</ul>
</li>
<li class="nav-group active">
<div class="nav-group-heading">
<i class="material-icons">arrow_right</i><span>Modules &amp; SDKs Introduction</span>
</div>
<ul class="nav-ul">
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/modules-sdks/">Modules &amp; SDKs Introduction</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/modules-sdks/#introduction">Introduction</a></li>
<li class="nav-leaf"><a href="/modules-sdks/#official-modules">Official Modules</a></li>
<li class="nav-leaf"><a href="/modules-sdks/#official-sdks">Official SDKs</a></li>
<li class="nav-leaf"><a href="/modules-sdks/#official-libraries">Official Libraries</a></li>
</ul>
</li>
<li class="nav-subgroup active">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/modules-sdks/mobile-sdk/">Mobile SDK</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf nav-subgroup-leaf"><a href="/modules-sdks/mobile-sdk/">Mobile SDK overview</a></li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/modules-sdks/mobile-sdk/android">Android</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/android#installation">Installation</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/android#usage">Usage</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/android#problems">Problems</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/android#payment-url-and-external-applications">Payment URL and External Applications</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/modules-sdks/mobile-sdk/ios">iOS</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/ios#installation">Installation</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/ios#usage">Usage</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/ios#problems">Problems</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/ios#payment-url-and-external-applications">Payment URL and External Applications</a></li>
</ul>
</li>
<li class="nav-leaf nav-subgroup-leaf"><a href="/modules-sdks/mobile-sdk/merchant-backend-sample-code">Merchant Backend Sample Code</a></li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/modules-sdks/mobile-sdk/merchant-backend">Merchant Backend</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf nav-subgroup-leaf"><a href="/modules-sdks/mobile-sdk/merchant-backend">Merchant Backend overview</a></li>
<li class="nav-leaf nav-subgroup-leaf"><a href="/modules-sdks/mobile-sdk/merchant-backend-sample-code">Merchant Backend Sample Code</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/modules-sdks/mobile-sdk/plain-webview">Plain Webview</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/plain-webview#the-mobile-sdk-and-you">The Mobile SDK And You</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/plain-webview#basics">Basics</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/plain-webview#completion">Completion</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/plain-webview#external-applications">External Applications</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/plain-webview#getting-back-from-external-applications">Getting Back from External Applications</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/plain-webview#dealing-with-picky-web-pages">Dealing with Picky Web Pages</a></li>
</ul>
</li>
<li class="nav-subgroup active">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/modules-sdks/mobile-sdk/process-diagrams">Process Diagrams</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/process-diagrams#initialization">Initialization</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/process-diagrams#discover-endpoints">Discover Endpoints</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/process-diagrams#optional-checkin">Optional Checkin</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/process-diagrams#begin-checkout">Begin Checkout</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/process-diagrams#external-content">External Content</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/process-diagrams#payment-completion">Payment Completion</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-group">
<div class="nav-group-heading">
<i class="material-icons">arrow_right</i><span>Payment Menu </span>
</div>
<ul class="nav-ul">
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payment-menu/"> Introduction</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payment-menu/#prerequisites">Prerequisites</a></li>
<li class="nav-leaf"><a href="/payment-menu/#introduction">Introduction</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payment-menu/after-payment"> After Payment</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payment-menu/after-payment#operations">Operations</a></li>
<li class="nav-leaf"><a href="/payment-menu/after-payment#cancel">Cancel</a></li>
<li class="nav-leaf"><a href="/payment-menu/after-payment#reversal">Reversal</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payment-menu/capture"> Capture</a>
</div>
<ul class="nav-ul"><li class="nav-leaf"><a href="/payment-menu/capture#step-3-capture-the-funds">Step 3: Capture the funds</a></li></ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payment-menu/other-features"> Other Features</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payment-menu/other-features#payment-orders">Payment Orders</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#description">Description</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#payment-url-1">Payment Url</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#instrument-mode">Instrument Mode</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#payer-aware-payment-menu">Payer Aware Payment Menu</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#operations">Operations</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#completeurl">CompleteUrl</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#recurring-payments">Recurring Payments</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#purchase-payments">Purchase Payments</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#verify-payments">Verify Payments</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#payments-resource">Payments Resource</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#prices">Prices</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#custom-logo">Custom Logo</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#payment-menu-events">Payment Menu Events</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#callback">Callback</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#problems">Problems</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#payeeinfo">PayeeInfo</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#payee-reference">Payee Reference</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#merchant-identified-payer">Merchant Identified Payer</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#metadata">Metadata</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#one-click-payments">One-Click Payments</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#settlement-and-reconciliation">Settlement and Reconciliation</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#3-d-secure-2">3-D Secure 2</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#updating-payment-menu">Updating Payment Menu</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payment-menu/payment-order"> Payment Order</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payment-menu/payment-order#step-1-create-payment-order">Step 1: Create Payment Order</a></li>
<li class="nav-leaf"><a href="/payment-menu/payment-order#payment-url">Payment Url</a></li>
<li class="nav-leaf"><a href="/payment-menu/payment-order#step-2-display-the-payment-menu">Step 2: Display the Payment Menu</a></li>
</ul>
</li>
</ul>
</li>
<li class="nav-group">
<div class="nav-group-heading">
<i class="material-icons">arrow_right</i><span>Payments</span>
</div>
<ul class="nav-ul">
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/">Payments</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/#prerequisites">Prerequisites</a></li>
<li class="nav-leaf"><a href="/payments/#platform-options">Platform options</a></li>
<li class="nav-leaf"><a href="/payments/#the-fundamentals">The Fundamentals</a></li>
<li class="nav-leaf"><a href="/payments/#the-payment-object">The Payment Object</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/card/"> Introduction</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf nav-subgroup-leaf"><a href="/payments/card/"> Introduction overview</a></li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/card/after-payment"> After Payment</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/card/after-payment#options-after-posting-a-payment">Options after posting a payment</a></li>
<li class="nav-leaf"><a href="/payments/card/after-payment#cancellations">Cancellations</a></li>
<li class="nav-leaf"><a href="/payments/card/after-payment#reversals">Reversals</a></li>
<li class="nav-leaf"><a href="/payments/card/after-payment#abort">Abort</a></li>
<li class="nav-leaf"><a href="/payments/card/after-payment#remove-payment-token">Remove payment token</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/card/capture"> Capture</a>
</div>
<ul class="nav-ul"><li class="nav-leaf"><a href="/payments/card/capture#capture">Capture</a></li></ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/card/direct"> Direct</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/card/direct#payment-flow">Payment flow</a></li>
<li class="nav-leaf"><a href="/payments/card/direct#step-1-create-a-purchase">Step 1: Create a Purchase</a></li>
<li class="nav-leaf"><a href="/payments/card/direct#step-2a-create-authorization-without-3-d-secure-authentication">Step 2a: Create authorization without 3-D Secure authentication</a></li>
<li class="nav-leaf"><a href="/payments/card/direct#step-2b-create-authorization-with-3-d-secure-authentication">Step 2b: Create authorization with 3-D Secure authentication</a></li>
<li class="nav-leaf"><a href="/payments/card/direct#options-after-posting-a-purchase-payment">Options after posting a purchase payment</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/card/mobile-card-payments"> Mobile</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/card/mobile-card-payments#card-payments-in-mobile-apps">Card Payments in Mobile Apps</a></li>
<li class="nav-leaf"><a href="/payments/card/mobile-card-payments#api-requests-for-payments">API Requests for Payments</a></li>
<li class="nav-leaf"><a href="/payments/card/mobile-card-payments#purchase-flow-mobile">Purchase flow mobile</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/card/other-features"> Other Features</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/card/other-features#payment-resource">Payment Resource</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#payment-and-transaction-states">Payment And Transaction States</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#create-payment">Create Payment</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#purchase">Purchase</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#completeurl">CompleteUrl</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#description">Description</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#recur">Recur</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#unscheduled-purchase">Unscheduled Purchase</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#payout">Payout</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#verify">Verify</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#one-click-payments">One-Click Payments</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#payment-url">Payment Url</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#callback">Callback</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#payment-link">Payment Link</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#transactions">Transactions</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#card-authorization-transaction">Card authorization transaction</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#payeeinfo">PayeeInfo</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#payee-reference">Payee Reference</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#prices">Prices</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#3-d-secure-2">3-D Secure 2</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#co-badge-card-choice-for-dankort">Co-badge Card Choice for Dankort</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#metadata">Metadata</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#settlement-and-reconciliation">Settlement and Reconciliation</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#problems">Problems</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#seamless-view-events">Seamless View Events</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/card/redirect"> Redirect</a>
</div>
<ul class="nav-ul"><li class="nav-leaf"><a href="/payments/card/redirect#step-1-create-a-purchase">Step 1: Create a Purchase</a></li></ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/card/seamless-view"> Seamless View</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/card/seamless-view#introduction">Introduction</a></li>
<li class="nav-leaf"><a href="/payments/card/seamless-view#step-1-create-payment">Step 1: Create Payment</a></li>
<li class="nav-leaf"><a href="/payments/card/seamless-view#step-2-display-the-payment">Step 2: Display the Payment</a></li>
<li class="nav-leaf"><a href="/payments/card/seamless-view#purchase-flow">Purchase Flow</a></li>
</ul>
</li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/invoice/">Invoice Payments</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf nav-subgroup-leaf"><a href="/payments/invoice/">Invoice Payments overview</a></li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/invoice/after-payment">Payments Invoice After Payment</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/invoice/after-payment#options-after-posting-a-payment">Options after posting a payment</a></li>
<li class="nav-leaf"><a href="/payments/invoice/after-payment#abort">Abort</a></li>
<li class="nav-leaf"><a href="/payments/invoice/after-payment#cancellations">Cancellations</a></li>
<li class="nav-leaf"><a href="/payments/invoice/after-payment#reversals">Reversals</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/invoice/capture">Payments Invoice Capture</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/invoice/capture#capture">Capture</a></li>
<li class="nav-leaf"><a href="/payments/invoice/capture#step-1-create-financingconsumer-capture">Step 1: Create FinancingConsumer Capture</a></li>
<li class="nav-leaf"><a href="/payments/invoice/capture#step-2-inspecting-the-captures">Step 2: Inspecting the Captures</a></li>
<li class="nav-leaf"><a href="/payments/invoice/capture#capture-flow">Capture Flow</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/invoice/direct">Payments Invoice Direct</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/invoice/direct#invoice-direct-implementation-flow">Invoice Direct implementation flow</a></li>
<li class="nav-leaf"><a href="/payments/invoice/direct#step-1-create-a-purchase">Step 1: Create a Purchase</a></li>
<li class="nav-leaf"><a href="/payments/invoice/direct#step-2-get-approvedlegaladdress-confirmation">Step 2: Get approvedLegalAddress confirmation</a></li>
<li class="nav-leaf"><a href="/payments/invoice/direct#step-3-complete-a-payment">Step 3: Complete a Payment</a></li>
<li class="nav-leaf"><a href="/payments/invoice/direct#invoice-flow">Invoice flow</a></li>
<li class="nav-leaf"><a href="/payments/invoice/direct#options-after-posting-a-purchase-payment">Options after posting a purchase payment</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/invoice/other-features"> Other Features</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/invoice/other-features#api-requests">API requests</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#payment-resource">Payment Resource</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#payment-and-transaction-states">Payment And Transaction States</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#create-payment">Create Payment</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#financing-consumer">Financing Consumer</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#recur">Recur</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#verify">Verify</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#transactions">Transactions</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#callback">Callback</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#payment-link">Payment Link</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#completeurl">CompleteUrl</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#description">Description</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#payeeinfo">PayeeInfo</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#payee-reference">Payee Reference</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#prices">Prices</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#metadata">Metadata</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#settlement-and-reconciliation">Settlement and Reconciliation</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#problems">Problems</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#seamless-view-events">Seamless View Events</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/invoice/redirect">Payments Invoice Redirect</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/invoice/redirect#introduction">Introduction</a></li>
<li class="nav-leaf"><a href="/payments/invoice/redirect#step-1-create-a-payment">Step 1: Create a payment</a></li>
<li class="nav-leaf"><a href="/payments/invoice/redirect#invoice-flow">Invoice flow</a></li>
<li class="nav-leaf"><a href="/payments/invoice/redirect#options-after-posting-a-payment">Options after posting a payment</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/invoice/seamless-view"> Seamless View</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/invoice/seamless-view#introduction">Introduction</a></li>
<li class="nav-leaf"><a href="/payments/invoice/seamless-view#step-1-create-the-payment">Step 1: Create the payment</a></li>
<li class="nav-leaf"><a href="/payments/invoice/seamless-view#step-2-display-the-payment">Step 2: Display the Payment</a></li>
<li class="nav-leaf"><a href="/payments/invoice/seamless-view#purchase-flow">Purchase Flow</a></li>
</ul>
</li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/mobile-pay/">MobilePay Online Payments</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf nav-subgroup-leaf"><a href="/payments/mobile-pay/">MobilePay Online Payments overview</a></li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/mobile-pay/after-payment"> After Payment</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/mobile-pay/after-payment#options-after-posting-a-payment">Options after posting a payment</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/after-payment#capture">Capture</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/after-payment#create-capture-transaction">Create capture transaction</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/after-payment#capture-sequence">Capture Sequence</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/after-payment#cancellations">Cancellations</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/after-payment#cancel-sequence">Cancel Sequence</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/after-payment#reversals">Reversals</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/after-payment#create-reversal-transaction">Create reversal transaction</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/after-payment#reversal-sequence">Reversal Sequence</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/after-payment#abort">Abort</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/mobile-pay/other-features"> Other Features</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#payment-resource">Payment Resource</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#purchase">Purchase</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#operations-1">Operations</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#completeurl">CompleteUrl</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#mobilepay-online-transactions">MobilePay Online transactions</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#authorizations">Authorizations</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#captures">Captures</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#cancellations">Cancellations</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#reversals">Reversals</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#capture-sequence">Capture Sequence</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#cancel-sequence">Cancel Sequence</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#reversal-sequence">Reversal Sequence</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#settlement-and-reconciliation">Settlement and Reconciliation</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#payment-link">Payment Link</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#description">Description</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#callback">Callback</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#transactions">Transactions</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#prices">Prices</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#metadata">Metadata</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#payeeinfo">PayeeInfo</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#payee-reference">Payee Reference</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#problems">Problems</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/mobile-pay/redirect"> Redirect</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/mobile-pay/redirect#mobilepay-redirect-integration-flow">MobilePay redirect integration flow</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/redirect#step-1-create-a-purchase">Step 1: Create a Purchase</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/redirect#step-2-get-the-transaction-status">Step 2: Get the transaction status</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/redirect#purchase-flow">Purchase flow</a></li>
</ul>
</li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/swish/">Payments Swish</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf nav-subgroup-leaf"><a href="/payments/swish/">Payments Swish overview</a></li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/swish/after-payment">Payments Swish After Payment</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/swish/after-payment#options-after-posting-a-payment">Options after posting a payment</a></li>
<li class="nav-leaf"><a href="/payments/swish/after-payment#swish-transactions">Swish transactions</a></li>
<li class="nav-leaf"><a href="/payments/swish/after-payment#sales">Sales</a></li>
<li class="nav-leaf"><a href="/payments/swish/after-payment#reversals">Reversals</a></li>
<li class="nav-leaf"><a href="/payments/swish/after-payment#abort">Abort</a></li>
<li class="nav-leaf"><a href="/payments/swish/after-payment#capture">Capture</a></li>
<li class="nav-leaf"><a href="/payments/swish/after-payment#cancel">Cancel</a></li>
<li class="nav-leaf"><a href="/payments/swish/after-payment#recurring">Recurring</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/swish/direct">Payments Swish Direct</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/swish/direct#payment-flow">Payment Flow</a></li>
<li class="nav-leaf"><a href="/payments/swish/direct#step-1-create-a-purchase">Step 1: Create a Purchase</a></li>
<li class="nav-leaf"><a href="/payments/swish/direct#step-2a-create-e-commerce-sale-transaction">Step 2a: Create E-Commerce Sale Transaction</a></li>
<li class="nav-leaf"><a href="/payments/swish/direct#e-commerce-purchase-flow">E-Commerce Purchase Flow</a></li>
<li class="nav-leaf"><a href="/payments/swish/direct#step-2b-create-m-commerce-sale-transaction">Step 2b: Create M-Commerce Sale Transaction</a></li>
<li class="nav-leaf"><a href="/payments/swish/direct#step-3-get-the-payment-status">Step 3: Get the payment status</a></li>
<li class="nav-leaf"><a href="/payments/swish/direct#m-commerce-purchase-flow">M-Commerce Purchase Flow</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/swish/other-features">Payments Swish Other Features</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/swish/other-features#payment-resource">Payment Resource</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#payment-and-transaction-states">Payment And Transaction States</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#create-payment">Create Payment</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#settlement-and-reconciliation">Settlement and Reconciliation</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#payment-link">Payment Link</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#description">Description</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#completeurl">CompleteUrl</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#payment-url">Payment Url</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#prices">Prices</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#payeeinfo">PayeeInfo</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#payee-reference">Payee Reference</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#transactions">Transactions</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#callback">Callback</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#metadata">Metadata</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#problems">Problems</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#seamless-view-events">Seamless View Events</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/swish/redirect">Payments Swish Redirect</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/swish/redirect#introduction">Introduction</a></li>
<li class="nav-leaf"><a href="/payments/swish/redirect#step-1-create-a-purchase">Step 1: Create a Purchase</a></li>
<li class="nav-leaf"><a href="/payments/swish/redirect#redirect-purchase-flow">Redirect Purchase flow</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/swish/seamless-view">Payments Swish Seamless View</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/swish/seamless-view#swish-seamless-view-integration-flow">Swish Seamless View integration flow</a></li>
<li class="nav-leaf"><a href="/payments/swish/seamless-view#step-1-create-a-purchase">Step 1: Create a Purchase</a></li>
<li class="nav-leaf"><a href="/payments/swish/seamless-view#payment-url">Payment Url</a></li>
<li class="nav-leaf"><a href="/payments/swish/seamless-view#step-2-display-the-payment-window">Step 2: Display the Payment Window</a></li>
<li class="nav-leaf"><a href="/payments/swish/seamless-view#seamless-view-purchase-flow">Seamless View Purchase flow</a></li>
</ul>
</li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/trustly/">Trustly Payments</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf nav-subgroup-leaf"><a href="/payments/trustly/">Trustly Payments overview</a></li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/trustly/after-payment"> After Payment</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/trustly/after-payment#options-after-posting-a-payment">Options after posting a payment</a></li>
<li class="nav-leaf"><a href="/payments/trustly/after-payment#abort">Abort</a></li>
<li class="nav-leaf"><a href="/payments/trustly/after-payment#reversals">Reversals</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/trustly/other-features"> Other Features</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/trustly/other-features#payment-resource">Payment Resource</a></li>
<li class="nav-leaf"><a href="/payments/trustly/other-features#payment-and-transaction-states">Payment And Transaction States</a></li>
<li class="nav-leaf"><a href="/payments/trustly/other-features#create-payment">Create Payment</a></li>
<li class="nav-leaf"><a href="/payments/trustly/other-features#transactions">Transactions</a></li>
<li class="nav-leaf"><a href="/payments/trustly/other-features#callback">Callback</a></li>
<li class="nav-leaf"><a href="/payments/trustly/other-features#completeurl">CompleteUrl</a></li>
<li class="nav-leaf"><a href="/payments/trustly/other-features#description">Description</a></li>
<li class="nav-leaf"><a href="/payments/trustly/other-features#payeeinfo">PayeeInfo</a></li>
<li class="nav-leaf"><a href="/payments/trustly/other-features#payee-reference">Payee Reference</a></li>
<li class="nav-leaf"><a href="/payments/trustly/other-features#settlement-and-reconciliation">Settlement and Reconciliation</a></li>
<li class="nav-leaf"><a href="/payments/trustly/other-features#metadata">Metadata</a></li>
<li class="nav-leaf"><a href="/payments/trustly/other-features#problems">Problems</a></li>
<li class="nav-leaf"><a href="/payments/trustly/other-features#seamless-view-events">Seamless View Events</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/trustly/redirect"> Redirect</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/trustly/redirect#introduction">Introduction</a></li>
<li class="nav-leaf"><a href="/payments/trustly/redirect#step-1-create-a-payment">Step 1: Create a payment</a></li>
<li class="nav-leaf"><a href="/payments/trustly/redirect#trustly-flow">Trustly flow</a></li>
<li class="nav-leaf"><a href="/payments/trustly/redirect#options-after-posting-a-payment">Options after posting a payment</a></li>
</ul>
</li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/vipps/">Payments Vipps</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf nav-subgroup-leaf"><a href="/payments/vipps/">Payments Vipps overview</a></li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/vipps/after-payment">Payments Vipps After Payment</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/vipps/after-payment#operations">Operations</a></li>
<li class="nav-leaf"><a href="/payments/vipps/after-payment#vipps-transactions">Vipps transactions</a></li>
<li class="nav-leaf"><a href="/payments/vipps/after-payment#authorizations">Authorizations</a></li>
<li class="nav-leaf"><a href="/payments/vipps/after-payment#captures">Captures</a></li>
<li class="nav-leaf"><a href="/payments/vipps/after-payment#create-capture-transaction">Create capture transaction</a></li>
<li class="nav-leaf"><a href="/payments/vipps/after-payment#cancellations">Cancellations</a></li>
<li class="nav-leaf"><a href="/payments/vipps/after-payment#create-cancellation-transaction">Create cancellation transaction</a></li>
<li class="nav-leaf"><a href="/payments/vipps/after-payment#reversals">Reversals</a></li>
<li class="nav-leaf"><a href="/payments/vipps/after-payment#abort">Abort</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/vipps/other-features">Payments Vipps Other Features</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/vipps/other-features#payment-resource">Payment Resource</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#payment-and-transaction-states">Payment And Transaction States</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#completeurl">CompleteUrl</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#payment-url">Payment Url</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#prices">Prices</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#description">Description</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#payeeinfo">PayeeInfo</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#payee-reference">Payee Reference</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#payee-reference-1">Payee Reference</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#transactions">Transactions</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#callback">Callback</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#payment-link">Payment Link</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#metadata">Metadata</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#problems">Problems</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#seamless-view-events">Seamless View Events</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#settlement-and-reconciliation">Settlement and Reconciliation</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/vipps/redirect">Payments Vipps Redirect</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/vipps/redirect#introduction">Introduction</a></li>
<li class="nav-leaf"><a href="/payments/vipps/redirect#step-1-create-a-purchase">Step 1: Create a Purchase</a></li>
<li class="nav-leaf"><a href="/payments/vipps/redirect#step-2-authorization">Step 2: Authorization</a></li>
<li class="nav-leaf"><a href="/payments/vipps/redirect#step-3-get-the-transaction-state">Step 3: Get the transaction state</a></li>
<li class="nav-leaf"><a href="/payments/vipps/redirect#vipps-redirect-integration-flow">Vipps Redirect integration flow</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/vipps/seamless-view">Payments Vipps Seamless View</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/vipps/seamless-view#step-1-create-a-purchase">Step 1: Create a Purchase</a></li>
<li class="nav-leaf"><a href="/payments/vipps/seamless-view#payment-url">Payment Url</a></li>
<li class="nav-leaf"><a href="/payments/vipps/seamless-view#step-2-display-the-payment-window">Step 2: Display the payment window</a></li>
<li class="nav-leaf"><a href="/payments/vipps/seamless-view#step-3-create-authorization-transaction">Step 3: Create authorization transaction</a></li>
<li class="nav-leaf"><a href="/payments/vipps/seamless-view#vipps-seamless-view-integration-flow">Vipps Seamless View integration flow</a></li>
</ul>
</li>
</ul>
</li>
<li class="nav-leaf nav-subgroup-leaf"><a href="/payments/payment-link">Payment Link</a></li>
</ul>
</li>
<li class="nav-group">
<div class="nav-group-heading">
<i class="material-icons">arrow_right</i><span>Resources </span>
</div>
<ul class="nav-ul">
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/resources/"> Introduction</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/resources/#test-data">Test Data</a></li>
<li class="nav-leaf"><a href="/resources/#demoshop">Demoshop</a></li>
<li class="nav-leaf"><a href="/resources/#open-source-development-guidelines">Open Source Development Guidelines</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/resources/data-protection">Data Protection</a>
</div>
<ul class="nav-ul"><li class="nav-leaf"><a href="/resources/data-protection#paymentorder-consumer-data">Paymentorder consumer data</a></li></ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/resources/development-guidelines/">Open Source Development Guidelines</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf nav-subgroup-leaf"><a href="/resources/development-guidelines/">Open Source Development Guidelines overview</a></li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/resources/development-guidelines/code-of-conduct">Code Of Conduct</a>
</div>
<ul class="nav-ul"><li class="nav-leaf"><a href="/resources/development-guidelines/code-of-conduct#contributor-code-of-conduct">Contributor Code of Conduct</a></li></ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/resources/development-guidelines/contributing">Contributing</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/resources/development-guidelines/contributing#how-to-contribute">How to contribute</a></li>
<li class="nav-leaf"><a href="/resources/development-guidelines/contributing#getting-started">Getting Started</a></li>
<li class="nav-leaf"><a href="/resources/development-guidelines/contributing#making-changes">Making Changes</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/resources/development-guidelines/good-commit-practice">Good Commit Practice</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/resources/development-guidelines/good-commit-practice#executive-summary">Executive Summary</a></li>
<li class="nav-leaf"><a href="/resources/development-guidelines/good-commit-practice#structural-split-of-changes">Structural split of changes</a></li>
<li class="nav-leaf"><a href="/resources/development-guidelines/good-commit-practice#things-to-avoid-when-creating-commits">Things to avoid when creating commits</a></li>
<li class="nav-leaf"><a href="/resources/development-guidelines/good-commit-practice#information-in-commit-messages">Information in commit messages</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/resources/development-guidelines/license">License</a>
</div>
<ul class="nav-ul"><li class="nav-leaf"><a href="/resources/development-guidelines/license#licensing">Licensing</a></li></ul>
</li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/resources/release-notes">Release Notes</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/resources/release-notes#04-sep-2020">04 Sep 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#28-aug-2020">28 Aug 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#21-aug-2020">21 Aug 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#17-july-2020">17 July 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#10-july-2020">10 July 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#07-july-2020">07 July 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#04-june-2020">04 June 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#29-may-2020">29 May 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#22-may-2020">22 May 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#14-may-2020">14 May 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#07-may-2020">07 May 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#april-2020">April 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#march-2020">March 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#february-2020">February 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#january-2020">January 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#december-2019">December 2019</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#november-2019">November 2019</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#october-2019">October 2019</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#august-2019">August 2019</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/resources/test-data">Test Data</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/resources/test-data#swedbank-pay-checkout-test-data">Swedbank Pay Checkout Test Data</a></li>
<li class="nav-leaf"><a href="/resources/test-data#credit-card-test-data">Credit Card Test Data</a></li>
<li class="nav-leaf"><a href="/resources/test-data#failure-testing">Failure Testing</a></li>
<li class="nav-leaf"><a href="/resources/test-data#invoice-test-data">Invoice Test Data</a></li>
<li class="nav-leaf"><a href="/resources/test-data#invoice-service-test-data">Invoice Service Test Data</a></li>
<li class="nav-leaf"><a href="/resources/test-data#vipps-test-data">Vipps Test Data</a></li>
<li class="nav-leaf"><a href="/resources/test-data#swish-test-data">Swish Test Data</a></li>
</ul>
</li>
<li class="nav-leaf nav-subgroup-leaf"><a href="/resources/demoshop">Demoshop</a></li>
<li class="nav-leaf nav-subgroup-leaf"><a href="/resources/public-migration-key">Public Migration Key</a></li>
<li class="nav-leaf nav-subgroup-leaf"><a href="/resources/terminology">Terminology</a></li>
</ul>
</li>
</ul>
                            </nav>
                        </div>
                    </div>

                    <main class="doc-view col-xxl-10 col-lg-9">
                        
                        
                        
                        
                        
                        <div class="title-header">
                            <div class="title-header-container
                                     max-width
                                    ">
                                
                                <h4>Mobile-sdk </h4>
                                
                                <h1> Process Diagrams</h1>
                                
                                <div class="title-header-estimated-read">
                                    <i class="material-icons">schedule</i>
                                    30 min read
                                </div>
                                
                                
                                <p></p>
<p>The previous pages have dealt with each component. This page contains
flowcharts that illustrate the entire process, taking into account all the
components involved.
It is recommended to read through the earlier pages first.
This page can them help you keep a picture of the whole system in mind,
and serve as a quick reference to the different steps and components.</p>

                                
                            </div>
                        </div>
                        
                        <div class="doc-container normal-padding max-width
                            ">
                            <article>
                                <div class="alert alert-complex alert-warning">
<header class="alert-header">
        
        <i class="material-icons alert-icon">warning</i>
      <h3>
        
        
          Unsupported
        
        
      </h3></header>
    

    
    
    <div class="alert-body">
        <p>The SDK is at an early stage of development
and is not supported as of yet by Swedbank Pay. It is provided as a
convenience to speed up your development, so please feel free to play around.
However, if you need support, please wait for a future, stable release.</p>
    </div>
    
    
</div>
    
      <h2 id="initialization">
        
        
          Initialization <a href="#initialization" class="header-anchor"></a>
        
        
      </h2>

<p>To use the SDK, you must have a valid <code class="language-html highlighter-rouge">Configuration</code> for it. The API for this is a bit different in Android and iOS, but generally you will only need one <code class="language-html highlighter-rouge">Configuration</code> for your app. On Android set it to <code class="language-html highlighter-rouge">PaymentFragment.defaultConfiguration</code>; on iOS store it in a convenient variable.</p>

<pre><code class="language-mermaid">sequenceDiagram
    alt Android
        App -&gt;&gt; SDK: Configuration.Builder(backendUrl)...build()
        SDK --&gt;&gt; App: configuration
        App -&gt;&gt; SDK: PaymentFragment.defaultConfiguration = configuration
    else iOS
        App -&gt;&gt; SDK: SwedbankPaySDK.Configuration.init(backendUrl: backendUrl)
        SDK --&gt;&gt; App: configuration
    end
</code></pre>

<p>When you want to make a payment, you construct a <code class="language-html highlighter-rouge">PaymentOrder</code> with the correct content. A very important part of the <code class="language-html highlighter-rouge">PaymentOrder</code> is the <code class="language-html highlighter-rouge">urls</code> field. The SDK has convenience methods for creating one; unless your use-case is advanced, you should use these. On Android use the <code class="language-html highlighter-rouge">PaymentOrderUrls(context, backendUrl, [callbackUrl], [termsOfServiceUrl])</code> constructor; on iOS use the <code class="language-html highlighter-rouge">PaymentOrderUrls.init(configuration:language:[callbackUrl:][termsOfServiceUrl:])</code> initializer. In both cases the convenience method depends on your <code class="language-html highlighter-rouge">Configuration</code> (<code class="language-html highlighter-rouge">backendUrl</code>is part of the <code class="language-html highlighter-rouge">Configuration</code>), so be careful if you have multiple Configurations in your app.</p>

<p>Additionally, you may construct a <code class="language-html highlighter-rouge">Consumer</code> if you wish to identify the payer. This enables saving payment details for further payments.</p>

<pre><code class="language-mermaid">sequenceDiagram
    participant User
    participant App
    participant SDK

    User -&gt;&gt; App : Begin payment
    rect rgba(138, 205, 195, 0.1)
        note right of App: Build Payment Order
        alt Android
            App -&gt;&gt; SDK: PaymentOrder(...) or PaymentOrder.Builder()...build()
            SDK --&gt;&gt; App: paymentOrder
        else iOS
            App -&gt;&gt; SDK: SwedbankPaySDK.PaymentOrder.init(...)
            SDK --&gt;&gt; App: paymentOrder
        end
    end
    opt Build Consumer
        alt Android
            App -&gt;&gt; SDK: Consumer(...)
            SDK --&gt;&gt; App: consumer
        else iOS
            App -&gt;&gt; SDK: Consumer.init(...)
            SDK --&gt;&gt; App: consumer
        end
    end
    rect rgba(138, 205, 195, 0.1)
        note right of App: Create and configure payment UI component
        alt Android
            App -&gt;&gt; SDK: PaymentFragment.ArgumentsBuilder()...build()
            SDK --&gt;&gt; App: arguments
            App -&gt;&gt; SDK: PaymentFragment()
            SDK --&gt;&gt; App: paymentFragment
            App -&gt;&gt; SDK: paymentFragment.arguments = arguments
            App -&gt;&gt; SDK: activity.paymentViewModel.[rich]state.observe(...)
        else iOS
            App -&gt;&gt; SDK: SwedbankPaySDKController.init(...)
            SDK --&gt;&gt; App: swedbankPaySDKController
            App -&gt;&gt; SDK: swedbankPaySDKController.delegate = ...
        end
    end
    App -&gt;&gt; App : Show payment UI component
</code></pre>
    
      <h2 id="discover-endpoints">
        
        
          Discover Endpoints <a href="#discover-endpoints" class="header-anchor"></a>
        
        
      </h2>

<p>The Merchant Backend is specified with a single static entry point; other interfaces are accessed by following links from previous responses. A request to the static entry point currently returns links to the <code class="language-html highlighter-rouge">consumers</code> and <code class="language-html highlighter-rouge">paymentorders</code> endpoints. In most cases the response to this request can be cached, and thus only needs to be made once per App session.</p>

<pre><code class="language-mermaid">sequenceDiagram
    participant SDK
    participant Merchant

    SDK -&gt;&gt; Merchant: GET /
    Merchant --&gt;&gt; SDK: { "consumers": "[consumers]", "paymentorders": "[paymentorders]" }
</code></pre>
    
      <h2 id="optional-checkin">
        
        
          Optional Checkin <a href="#optional-checkin" class="header-anchor"></a>
        
        
      </h2>

<p>If <code class="language-html highlighter-rouge">Consumer</code> was provided, the payment beings with a “checkin” flow, where the payer is identified. This allows for saving payment details for later payments.</p>

<p>The checkin flow is simple: first a request is made to begin a checkin session, then an html page is constructed using the script link received from that request, and when that page successfully identifies the payer, a javascript callback is received. The <code class="language-html highlighter-rouge">consumerProfileRef</code> received from that callback is then set to the Payment Order to be processed.</p>

<pre><code class="language-mermaid">sequenceDiagram
    participant SDK
    participant Merchant
    participant SwedbankPay as Swedbank Pay
    participant WebView
    participant User

    SDK -&gt;&gt; Merchant: POST [consumers] { "operation": "initiate-consumer-session", ... }
    Merchant -&gt;&gt; SwedbankPay: POST /psp/consumers/ { "operation": "initiate-consumer-session", ... }
    SwedbankPay --&gt;&gt; Merchant: { "operations": [{ "rel": "view-consumer-identification", "href": "[consumer-script]" }] }
    Merchant --&gt;&gt; SDK: { "operations": [{ "rel": "view-consumer-identification", "href": "[consumer-script]" }] }
    SDK -&gt;&gt; WebView: &lt;html&gt;...&lt;script src="[consumer-script]"&gt;...payex.hostedView.consumer(...)...&lt;/html&gt;
    WebView -&gt;&gt; User: Show checkin UI
    User -&gt;&gt; WebView: Enter personal details
    WebView -&gt;&gt; SDK: onConsumerIdentified({ "consumerProfileRef" : "..." })
    SDK -&gt;&gt; SDK: paymentOrder.payer = { "consumerProfileRef" : "..." }
</code></pre>
    
      <h2 id="begin-checkout">
        
        
          Begin Checkout <a href="#begin-checkout" class="header-anchor"></a>
        
        
      </h2>

<p>With the Payment Order ready, the SDK begins the “checkout” flow, where the actual payment is made. The checkout flow begins similarly to the checkin flow: a request is made to create a Payment Order, then an html page is constructed and displayed to the user. In the case of the “create Payment Order” request, however, it is expected that the Merchant Backend processes
the request and response: Setting of <code class="language-html highlighter-rouge">payeeId</code> and <code class="language-html highlighter-rouge">paymentReference</code> in particular seems better left to the backend; similarly the backend is probably interested in storing the <code class="language-html highlighter-rouge">id</code> of the created Payment Order for capture and other possible operations.</p>

<p>At this point the user is interacting with the payment menu; the next step depends on the exact payment method chosen.</p>

<pre><code class="language-mermaid">sequenceDiagram
    participant SDK
    participant Merchant
    participant SwedbankPay as Swedbank Pay
    participant WebView
    participant User

    SDK -&gt;&gt; Merchant: POST [paymentorders] { paymentorder: {...} }
    Merchant -&gt;&gt; Merchant: Preprocess payment order (e.g. create payeeReference)
    Merchant -&gt;&gt; SwedbankPay: POST /psp/paymentorders/ { paymentorder: {...} }
    SwedbankPay --&gt;&gt; Merchant: { "id": "...", "operations": [{ "rel": "view-paymentorder", "href": "[paymentorder-script]" }], ... }
    Merchant -&gt;&gt; Merchant: Postprocess payment order (e.g. store id)
    Merchant --&gt;&gt; SDK: { "id": "...", "operations": [{ "rel": "view-paymentorder", "href": "[paymentorder-script]" }], ... }
    SDK -&gt;&gt; WebView: &lt;html&gt;...&lt;script src="[paymentorder-script]"&gt;...payex.hostedView.paymentMenu(...)...&lt;/html&gt;
    WebView -&gt;&gt; User: Show checkout UI
    User -&gt;&gt; WebView: Choose payment method and enter details
</code></pre>
    
      <h2 id="external-content">
        
        
          External Content <a href="#external-content" class="header-anchor"></a>
        
        
      </h2>

<p>While some payments may be completed inside the payment menu in their entirety, others will require interaction with some external web page, and/or application. In most cases external web pages can be opened in the same web view used to show the payment menu, and when they want to return to the payment menu, they signal this by attempting to navigate to the url set as <code class="language-html highlighter-rouge">paymentUrl</code> in the Payment Order. We intercept this navigation, and reload the payment menu, as appropriate.</p>

<p>When an external application is launched, the flow signals the return to the payment menu by again opening <code class="language-html highlighter-rouge">paymentUrl</code>. This time, however, we cannot intercept it. The system then handles opening that url the usual way. For maximum compatibility, <code class="language-html highlighter-rouge">paymentUrl</code> is a regular https url. On iOS, <code class="language-html highlighter-rouge">paymentUrl</code> is designed to be in format that is registered as a <a href="https://developer.apple.com/documentation/uikit/inter-process_communication/allowing_apps_and_websites_to_link_to_your_content">Universal Link</a> to the app, which causes the system to open <code class="language-html highlighter-rouge">paymentUrl</code> in the app. The example backend serves a <code class="language-html highlighter-rouge">/.well-known/apple-app-site-association</code> file that assigns the paths under <code class="language-html highlighter-rouge">/sdk-callback/</code> to be Universal Links to the application set in the configuration. The SDK defaults to building <code class="language-html highlighter-rouge">paymentUrl</code> under this path. Combined with the proper configuration in the app and backend, this makes <code class="language-html highlighter-rouge">paymentUrl</code>s be Universal Links. On Android 6.0 and later it is possible to do a similar thing, but it is much more difficult to set up on the server side, and we need a solution for earlier versions anyway. Therefore, on Android, <code class="language-html highlighter-rouge">paymentUrl</code> will be opened in the browser.</p>

<p>Finally, in our testing, we have seen that certain external pages used with certain payment instruments do not work correctly inside a web view, and must be shown in the browser instead. If we determine that the external page is one of these pages, it is opened in the browser. Again, return to the payment menu is signaled by a navigation to <code class="language-html highlighter-rouge">paymentUrl</code>, which will, in this case be opened in the browser on both platforms (but see below for iOS details).</p>

<pre><code class="language-mermaid">sequenceDiagram
    participant App
    participant SDK
    participant WebView
    participant System
    participant Browser
    participant Ext as External App
    participant User

    WebView -&gt;&gt; SDK: Navigate to another page
    alt Navigation is to a regular http(s) URL
        SDK -&gt;&gt; SDK: Check web view compatibility
        alt Compatible with Web Wiew
            SDK -&gt;&gt; WebView: Proceed with navigation normally ①
            WebView -&gt;&gt; SDK: Navigate to paymentUrl ②
            SDK -&gt;&gt; SDK: Recognize paymentUrl
            SDK -&gt;&gt; WebView: Cancel navigation
        else Not Compatible with Web Wiew
            SDK -&gt;&gt; WebView: Cancel navigation
            SDK -&gt;&gt; System: Open URL
            System -&gt;&gt; Browser: Open URL in Browser
            User -&gt;&gt; Browser: Handle external flow
            Browser -&gt;&gt; User: Handle external flow
            Browser -&gt; Browser: Open paymentUrl in Browser
        end
    else Navigation is to an app-specific URL (custom scheme, Android Deep Link/App Link, iOS Universal Link)
        SDK -&gt;&gt; WebView: Cancel navigation
        SDK -&gt;&gt; System: Open URL
        System -&gt;&gt; Ext: Launch URL-appropriate app
        User -&gt;&gt; Ext: Handle external flow
        Ext -&gt;&gt; User: Handle external flow
        Ext -&gt;&gt; System: Open paymentUrl
        alt Android
            System -&gt;&gt; Browser: Open paymentUrl in Browser ③
        else iOS
            System -&gt;&gt; App: Launch app with paymentUrl ④
        end
    end
</code></pre>

<ul>
  <li>① The same check is repeated for any further navigation inside the WebView</li>
  <li>② All properly configured authentication flows must end up here</li>
  <li>③ On Android, paymentUrl is an https URL that redirects to an Android Intent URL.</li>
  <li>④ On iOS, paymentUrl is a Universal Link. When an app open a Universal Link to\nanother app, it should be routed to that app instead of the Browser. However, Univeral Links are finicky things, and it is not impossible that it gets opened in the Browser instead. In that case, the flow continues with “paymentUrl opened in Browser” below instead.</li>
</ul>
    
      <h3 id="return-from-browser">
        
        
          Return from Browser <a href="#return-from-browser" class="header-anchor"></a>
        
        
      </h3>

<p>If the external flow ended with <code class="language-html highlighter-rouge">paymentUrl</code> opened in the browser, we need a way to get back to the app. On Android, this is simple to accomplish by redirecting to an <a href="https://developer.chrome.com/multidevice/android/intents">Android Intent Uri</a>; the SDK and backend work together to construct the Intent Uri to point to the correct app. This Intent will cause the app to be brought back into focus, and the PaymentFragment will recognize the <code class="language-html highlighter-rouge">paymentUrl</code> and reload the payment menu.</p>

<p>On iOS, the situation is more complicated. As mentioned above, <code class="language-html highlighter-rouge">paymentUrl</code> is a Universal Link, and navigation to it should be routed to the app. However, Universal Links are a bit unreliable, in that they require certain conditions to be fulfilled; otherwise, they are opened in the browser like regular links. Unfortunately, one of the conditions, namely that the navigation originated from the user pressing on a link, is often not fulfilled in the external pages used by payment methods. Therefore, we must have a system that works correctly, even if <code class="language-html highlighter-rouge">paymentUrl</code> is opened in the browser.</p>

<p>On iOS, we use the following system:</p>

<ul>
  <li>
<code class="language-html highlighter-rouge">paymentUrl</code> redirects (301) to a trampoline page hosted at a different domain</li>
  <li>the trampoline page has a button</li>
  <li>pressing that button navigates to <code class="language-html highlighter-rouge">paymentUrl</code> but with an extra parameter</li>
  <li>
<code class="language-html highlighter-rouge">paymentUrl</code> with the extra parameter redirects to a custom-scheme url</li>
</ul>

<p>The trampoline page is on a different domain due to another requirement of Universal Links: they are only routed to the app if opened from a different domain. Now, both <code class="language-html highlighter-rouge">paymentUrl</code> and <code class="language-html highlighter-rouge">paymentUrl</code> with the extra parameter are Universal Links, and as the second navigation is “forced” to originate from User Interaction, it should be routed to the app. However, if something still goes sideways, and experience says it can, and even this “augmented” <code class="language-html highlighter-rouge">paymentUrl</code> is opened in the browser, then we finally redirect to a custom-scheme url, which has no choice but to be routed to the app. The reason we do not do this immediately is because using custom schemes triggers a confirmation dialog the developer has no control over, and we want to avoid that.</p>

<p>When the app is then launched with <code class="language-html highlighter-rouge">paymentUrl</code>, the augmented <code class="language-html highlighter-rouge">paymentUrl</code>, or the custom-scheme url constructed from <code class="language-html highlighter-rouge">paymentUrl</code>, the Application Delegate must then forward the url to the SDK using the SwedbankPaySDK.open(url:) or SwedbankPaySDK.continue(userActivity:) method, as the case may be. The SDK will then proceed to reload the payment menu as appropriate.</p>

<p>This system does have the drawback of requiring a custom url scheme, which will almost always be left unused. As we gather more data, we may be able to remove the requirement in the future.</p>

<p>Please see this diagram for an illustration of the different steps in the process:</p>

<pre><code class="language-mermaid">sequenceDiagram
    participant User
    participant Browser
    participant Merchant
    participant Trampoline as Universal Link Trampoline
    participant System
    participant SDK
    participant App

    alt Android
        Browser -&gt;&gt; Merchant: Load paymentUrl
        Merchant --&gt;&gt; Browser: 301 Moved Permanently ⑤
        Browser -&gt;&gt; Browser: Parse Android Intent URL
        Browser -&gt;&gt; System: Start activity with the parsed Intent, where the Intent Uri is paymentUrl
        System -&gt;&gt; SDK: Start callback activity
        SDK -&gt;&gt; SDK: Recognize paymentUrl
    else iOS
        alt Happiest Path
            Browser -&gt;&gt; Browser: Recognize that paymentUrl is a Universal Link for App
            Browser -&gt;&gt; System: Launch app with paymentUrl ⑥
        else Less Happy Path
            Browser -&gt;&gt; Merchant: Load paymentUrl
            Merchant --&gt;&gt; Browser: 301 Moved Permanently ⑦
            Browser -&gt;&gt; Trampoline: Load trampoline page
            Browser -&gt;&gt; User: Show trampoline page ⑧
            User -&gt;&gt; Browser: Press "Return to App" button
            Browser -&gt;&gt; Browser: Navigate to paymentUrl&amp;fallback=true
            alt Less Happy Path (contd.)
                Browser -&gt;&gt; Browser : Recognize that paymentUrl&amp;fallback=true is a Universal Link for App
                Browser -&gt;&gt; System : Launch app with paymentUrl&amp;fallback=true
            else Sad Path ⑨
                Browser -&gt;&gt; Merchant: Load paymentUrl&amp;fallback=true
                Merchant --&gt;&gt; Browser: 301 Moved Permanently ⑩
                Browser -&gt;&gt; User: Show confirmation dialog
                User -&gt;&gt; Browser: Accept app launch
                Browser -&gt;&gt; System: Launch app with customscheme://[paymentUrl-without-scheme]&amp;fallback=true
            end
        end
        System -&gt;&gt; App: Call URL handler ⑪
        App -&gt;&gt; SDK: SwedbankPaySDK.open(url:) or SwedbankPaySDK.continue(userActivity:)
        SDK -&gt;&gt; SDK: Recognize paymentUrl or modified paymentUrl
    end
</code></pre>

<ul>
  <li>⑤ Location: <code class="language-html highlighter-rouge">intent://[paymentUrl-without-scheme]/#Intent;scheme=[paymentUrl-scheme];action=com.swedbankpay.mobilesdk.VIEW_PAYMENTORDER;package=[app-package];end;</code>
</li>
  <li>⑥ Universal Links have certain conditions for them to be activated. One of these is that the navigation must have started from a user interaction. As many 3D-Secure pages have an automatic redirect, this can cause the link to be opened in the Browser instead. Therefore the chance for this path to be taken is low. (N.B. It does seem than iOS 13.4 has made some change to the logic, causing this happiest path to be hit more often.)</li>
  <li>⑦ Location: <code class="language-html highlighter-rouge">https://trampoline.page.host/trampoline/page/path?target=paymentUrl%26fallback=true</code>
</li>
  <li>⑧  The “Trampoline Page” has a button, which links back to paymentUrl, but with an additional query parameter (actually this extra parameter is added by the backend when generating the redirect to the trampoline page). Importantly, the Trampoline is on a different domain than paymentUrl, as Universal Links are only forwarded to the app if they are opened from a different domain than the link’s domain.</li>
  <li>⑨ All cases should be caught by one of these two flows. However, Universal Links remain finicky, and therefore it is good to provide one final fallback.</li>
  <li>⑩ Location: <code class="language-html highlighter-rouge">customscheme://[paymentUrl-without-scheme]<span class="err">&amp;</span>fallback=true</code>. <code class="language-html highlighter-rouge">customscheme</code> is a URL scheme unique to the App.</li>
  <li>⑪ Universal links result in a call to <code class="language-html highlighter-rouge">UIApplicationDelegate.application(_:continue:restorationHandler:)</code>, while custom-scheme links result in a call to <code class="language-html highlighter-rouge">UIApplicationDelegate.application(_:open:options:)</code>.</li>
</ul>
    
      <h2 id="payment-completion">
        
        
          Payment Completion <a href="#payment-completion" class="header-anchor"></a>
        
        
      </h2>

<p>When the payment is completed, possibly after reloading the payment menu after a navigation to <code class="language-html highlighter-rouge">paymentUrl</code>, the payment menu will report success by attempting to navigate to <code class="language-html highlighter-rouge">completeUrl</code>. The SDK intercepts this and invokes a callback to your app. It is your app’s responsibility to then remove the payment UI from view and notify the user. Similarly, if the payment is canceled, the SDK intercepts the navigation to <code class="language-html highlighter-rouge">cancelUrl</code> and reports the cancellation status to your app.</p>

<pre><code class="language-mermaid">sequenceDiagram
    participant User
    participant App
    participant SDK
    participant WebView

    SDK -&gt;&gt; WebView: Reload &lt;html&gt;...&lt;script src="[paymentorder-script]"&gt;...payex.hostedView.paymentMenu(...)...&lt;/html&gt;
    WebView -&gt;&gt; SDK: Navigate to completeUrl
    SDK -&gt;&gt; WebView: Cancel navigation
    alt Android
        SDK -&gt;&gt; SDK: PaymentViewModel.state &lt;- SUCCESS
        SDK -&gt;&gt; App: Observer&lt;PaymentViewModel.State&gt;.onChanged(SUCCESS)
    else iOS
        SDK -&gt;&gt; App: SwedbankPaySDKDelegate.paymentComplete()
    end
    App -&gt;&gt; App: Remove payment UI component
    App -&gt;&gt; User: Report payment result
</code></pre>

<nav class="iterator d-flex">
    
    <a class="mr-auto btn btn-guiding" role="button" rel="prev" href="ios">
        Back: iOS
    </a>
    

    
    <a class="ml-auto btn btn-executive" role="button" rel="next" href="plain-webview">
        Next: Using a Web View Instead
    </a>
    
</nav>
                            </article>
                        </div>
                    </main>
                </div>
            </div>

            <footer class="page-footer">
                <p class="page-footer-rights">© Swedbank Pay</p>
            </footer>
        </div>

        <script src="https://design.swedbankpay.com/v/4.7.0/scripts/dg.js"></script>
        <script src="/assets/js/swedbank-pay-design-guide-theme.js"></script>
        <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-156582708-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-156582708-1');
</script>

    </body>

</html>

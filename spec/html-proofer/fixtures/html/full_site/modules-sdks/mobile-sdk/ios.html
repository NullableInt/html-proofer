<!DOCTYPE html>
<html lang="en-US">

    <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="theme-color" content="#000">
        <meta name="application-name" content="iOS">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <meta name="apple-mobile-web-app-title" content="iOS">
        <meta name="msapplication-TileColor" content="#000">
        <meta name="msapplication-TileImage" content="/icons/mstile-144x144.png">
        <meta property="og:type" value="website">
        <meta property="og:url" value="/modules-sdks/mobile-sdk/ios.html">
        <meta property="og:title" value="Mobile-sdk – iOS">
        <meta name="title" content="Mobile-sdk – iOS">
        <meta property="og:description" value="Swedbank Pay Developer Portal">
        <meta name="description" content="Swedbank Pay Developer Portal">
        <meta property="og:image" value="/assets/img/swedbank-pay-developer-portal.png">
        <title>Mobile-sdk – iOS</title>
        <link rel="stylesheet" href="https://design.swedbankpay.com/v/4.7.0/styles/dg-style.css">
        <link rel="stylesheet" href="/assets/css/style.css">
        <link rel="stylesheet" href="/assets/css/pygments-autumn.css">
        <link rel="shortcut icon" href="https://design.swedbankpay.com/v/4.7.0/icons/favicon.ico">
        <link rel="icon" type="image/png" sizes="16x16" href="https://design.swedbankpay.com/v/4.7.0/icons/favicon-16x16.png">
        <link rel="icon" type="image/png" sizes="32x32" href="https://design.swedbankpay.com/v/4.7.0/icons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="228x228" href="https://design.swedbankpay.com/v/4.7.0/icons/coast-228x228.png">
        <link href="https://fonts.googleapis.com/css?family=Material+Icons+Outlined" rel="stylesheet">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="iOS">
<link rel="apple-touch-icon" sizes="57x57" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="167x167" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-icon-167x167.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-icon-180x180.png">
<link rel="apple-touch-icon" sizes="1024x1024" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-icon-1024x1024.png">
<link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 480px) and (orientation: ) and (-webkit-device-pixel-ratio: 1)" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-startup-image-320x460.png">
<link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 480px) and (orientation: ) and (-webkit-device-pixel-ratio: 2)" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-startup-image-640x920.png">
<link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (orientation: ) and (-webkit-device-pixel-ratio: 2)" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-startup-image-640x1096.png">
<link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (orientation: ) and (-webkit-device-pixel-ratio: 2)" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-startup-image-750x1294.png">
<link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 3)" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-startup-image-1182x2208.png">
<link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 3)" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-startup-image-1242x2148.png">
<link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 1)" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-startup-image-748x1024.png">
<link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 1)" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-startup-image-768x1004.png">
<link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 2)" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-startup-image-1496x2048.png">
<link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 2)" href="https://design.swedbankpay.com/v/4.7.0/icons/apple-touch-startup-image-1536x2008.png">
<script src="/assets/js/mermaid.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        <script src="/assets/tipuesearch/tipuesearch_content.js"></script>
        <script src="/assets/tipuesearch/tipuesearch_set.js"></script>
        <script src="/assets/tipuesearch/tipuesearch.min.js"></script>
    </head>

    <body>
        <div id="designguide">
            <div class="documentation">
                <div class="row">
                    <div class="col-xxl-2 col-lg-3 pr-0">
                        <div class="sidebar dg-sidebar">
                            <nav class="sidebar-nav">
                                <a href="/" class="sidebar-header">
                                    <img src="https://design.swedbankpay.com/v/4.7.0/img/swedbankpay-logo-v.svg" alt="Swedbank Pay vertical logo">
                                    <div class="sidebar-header-text">
                                        <span>{</span>developer portal<span>}</span>
                                    </div>
                                </a>

                                <ul id="dx-sidebar-main-nav-ul" class="main-nav-ul">
<li class="nav-group">
<div class="nav-group-heading">
<i class="material-icons">arrow_right</i><span>Checkout </span>
</div>
<ul class="nav-ul">
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/checkout/"> Introduction</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/checkout/#prerequisites">Prerequisites</a></li>
<li class="nav-leaf"><a href="/checkout/#introduction">Introduction</a></li>
<li class="nav-leaf"><a href="/checkout/#languages">Languages</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/checkout/after-payment"> After Payment</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/checkout/after-payment#operations">Operations</a></li>
<li class="nav-leaf"><a href="/checkout/after-payment#cancel">Cancel</a></li>
<li class="nav-leaf"><a href="/checkout/after-payment#reversal">Reversal</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/checkout/capture"> Capture</a>
</div>
<ul class="nav-ul"><li class="nav-leaf"><a href="/checkout/capture#step-5-capture-the-funds">Step 5: Capture the funds</a></li></ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/checkout/checkin"> Checkin</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/checkout/checkin#step-1-initiate-session-for-consumer-identification">Step 1: Initiate session for consumer identification</a></li>
<li class="nav-leaf"><a href="/checkout/checkin#step-2-display-swedbank-pay-checkin-module">Step 2: Display Swedbank Pay Checkin module</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/checkout/other-features"> Other Features</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/checkout/other-features#payment-orders">Payment Orders</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#description">Description</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#payment-url-1">Payment Url</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#operations">Operations</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#completeurl">CompleteUrl</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#recurring-payments">Recurring Payments</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#purchase-payments">Purchase Payments</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#verify-payments">Verify Payments</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#payments-resource">Payments Resource</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#prices">Prices</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#custom-logo">Custom Logo</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#checkin-events">Checkin Events</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#payment-menu-events">Payment Menu Events</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#callback">Callback</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#problems">Problems</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#payeeinfo">PayeeInfo</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#payee-reference">Payee Reference</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#merchant-authenticated-consumer">Merchant Authenticated Consumer</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#merchant-identified-payer">Merchant Identified Payer</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#metadata">Metadata</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#settlement-and-reconciliation">Settlement and Reconciliation</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#3-d-secure-2">3-D Secure 2</a></li>
<li class="nav-leaf"><a href="/checkout/other-features#updating-payment-menu">Updating Payment Menu</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/checkout/payment-menu"> Payment Menu</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/checkout/payment-menu#step-3-create-payment-order">Step 3: Create Payment Order</a></li>
<li class="nav-leaf"><a href="/checkout/payment-menu#payment-url">Payment Url</a></li>
<li class="nav-leaf"><a href="/checkout/payment-menu#step-4-display-the-payment-menu">Step 4: Display the Payment Menu</a></li>
</ul>
</li>
</ul>
</li>
<li class="nav-group">
<div class="nav-group-heading">
<i class="material-icons">arrow_right</i><span>Gift Cards </span>
</div>
<ul class="nav-ul">
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/gift-cards/"> Introduction</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/gift-cards/#overview">Overview</a></li>
<li class="nav-leaf"><a href="/gift-cards/#prerequisites">Prerequisites</a></li>
<li class="nav-leaf"><a href="/gift-cards/#implementation">Implementation</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/gift-cards/operations"> Operations</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/gift-cards/operations#gift-card-resource">Gift card resource</a></li>
<li class="nav-leaf"><a href="/gift-cards/operations#get-new-gift-card">Get New Gift Card</a></li>
<li class="nav-leaf"><a href="/gift-cards/operations#pre-deposit">Pre Deposit</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/gift-cards/other-features"> Other Features</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/gift-cards/other-features#purchase">Purchase</a></li>
<li class="nav-leaf"><a href="/gift-cards/other-features#deposit">Deposit</a></li>
<li class="nav-leaf"><a href="/gift-cards/other-features#balance">Balance</a></li>
<li class="nav-leaf"><a href="/gift-cards/other-features#authentication">Authentication</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/gift-cards/payment-client">Test Client</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/gift-cards/payment-client#prerequisites">Prerequisites</a></li>
<li class="nav-leaf"><a href="/gift-cards/payment-client#project-setup">Project setup</a></li>
<li class="nav-leaf"><a href="/gift-cards/payment-client#first-app-run">First App run</a></li>
<li class="nav-leaf"><a href="/gift-cards/payment-client#testing-application">Testing application</a></li>
<li class="nav-leaf"><a href="/gift-cards/payment-client#build-docker-image">Build docker image</a></li>
<li class="nav-leaf"><a href="/gift-cards/payment-client#deploy-to-local-docker">Deploy to local docker</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/gift-cards/security"> Security</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/gift-cards/security#oauth2">OAuth2</a></li>
<li class="nav-leaf"><a href="/gift-cards/security#hmac">HMAC</a></li>
<li class="nav-leaf"><a href="/gift-cards/security#security-documentation">Security Documentation</a></li>
<li class="nav-leaf"><a href="/gift-cards/security#test-client">Test client</a></li>
</ul>
</li>
</ul>
</li>
<li class="nav-group active">
<div class="nav-group-heading">
<i class="material-icons">arrow_right</i><span>Modules &amp; SDKs Introduction</span>
</div>
<ul class="nav-ul">
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/modules-sdks/">Modules &amp; SDKs Introduction</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/modules-sdks/#introduction">Introduction</a></li>
<li class="nav-leaf"><a href="/modules-sdks/#official-modules">Official Modules</a></li>
<li class="nav-leaf"><a href="/modules-sdks/#official-sdks">Official SDKs</a></li>
<li class="nav-leaf"><a href="/modules-sdks/#official-libraries">Official Libraries</a></li>
</ul>
</li>
<li class="nav-subgroup active">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/modules-sdks/mobile-sdk/">Mobile SDK</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf nav-subgroup-leaf"><a href="/modules-sdks/mobile-sdk/">Mobile SDK overview</a></li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/modules-sdks/mobile-sdk/android">Android</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/android#installation">Installation</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/android#usage">Usage</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/android#problems">Problems</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/android#payment-url-and-external-applications">Payment URL and External Applications</a></li>
</ul>
</li>
<li class="nav-subgroup active">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/modules-sdks/mobile-sdk/ios">iOS</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/ios#installation">Installation</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/ios#usage">Usage</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/ios#problems">Problems</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/ios#payment-url-and-external-applications">Payment URL and External Applications</a></li>
</ul>
</li>
<li class="nav-leaf nav-subgroup-leaf"><a href="/modules-sdks/mobile-sdk/merchant-backend-sample-code">Merchant Backend Sample Code</a></li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/modules-sdks/mobile-sdk/merchant-backend">Merchant Backend</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf nav-subgroup-leaf"><a href="/modules-sdks/mobile-sdk/merchant-backend">Merchant Backend overview</a></li>
<li class="nav-leaf nav-subgroup-leaf"><a href="/modules-sdks/mobile-sdk/merchant-backend-sample-code">Merchant Backend Sample Code</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/modules-sdks/mobile-sdk/plain-webview">Plain Webview</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/plain-webview#the-mobile-sdk-and-you">The Mobile SDK And You</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/plain-webview#basics">Basics</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/plain-webview#completion">Completion</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/plain-webview#external-applications">External Applications</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/plain-webview#getting-back-from-external-applications">Getting Back from External Applications</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/plain-webview#dealing-with-picky-web-pages">Dealing with Picky Web Pages</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/modules-sdks/mobile-sdk/process-diagrams">Process Diagrams</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/process-diagrams#initialization">Initialization</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/process-diagrams#discover-endpoints">Discover Endpoints</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/process-diagrams#optional-checkin">Optional Checkin</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/process-diagrams#begin-checkout">Begin Checkout</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/process-diagrams#external-content">External Content</a></li>
<li class="nav-leaf"><a href="/modules-sdks/mobile-sdk/process-diagrams#payment-completion">Payment Completion</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="nav-group">
<div class="nav-group-heading">
<i class="material-icons">arrow_right</i><span>Payment Menu </span>
</div>
<ul class="nav-ul">
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payment-menu/"> Introduction</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payment-menu/#prerequisites">Prerequisites</a></li>
<li class="nav-leaf"><a href="/payment-menu/#introduction">Introduction</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payment-menu/after-payment"> After Payment</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payment-menu/after-payment#operations">Operations</a></li>
<li class="nav-leaf"><a href="/payment-menu/after-payment#cancel">Cancel</a></li>
<li class="nav-leaf"><a href="/payment-menu/after-payment#reversal">Reversal</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payment-menu/capture"> Capture</a>
</div>
<ul class="nav-ul"><li class="nav-leaf"><a href="/payment-menu/capture#step-3-capture-the-funds">Step 3: Capture the funds</a></li></ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payment-menu/other-features"> Other Features</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payment-menu/other-features#payment-orders">Payment Orders</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#description">Description</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#payment-url-1">Payment Url</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#instrument-mode">Instrument Mode</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#payer-aware-payment-menu">Payer Aware Payment Menu</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#operations">Operations</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#completeurl">CompleteUrl</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#recurring-payments">Recurring Payments</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#purchase-payments">Purchase Payments</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#verify-payments">Verify Payments</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#payments-resource">Payments Resource</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#prices">Prices</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#custom-logo">Custom Logo</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#payment-menu-events">Payment Menu Events</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#callback">Callback</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#problems">Problems</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#payeeinfo">PayeeInfo</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#payee-reference">Payee Reference</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#merchant-identified-payer">Merchant Identified Payer</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#metadata">Metadata</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#one-click-payments">One-Click Payments</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#settlement-and-reconciliation">Settlement and Reconciliation</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#3-d-secure-2">3-D Secure 2</a></li>
<li class="nav-leaf"><a href="/payment-menu/other-features#updating-payment-menu">Updating Payment Menu</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payment-menu/payment-order"> Payment Order</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payment-menu/payment-order#step-1-create-payment-order">Step 1: Create Payment Order</a></li>
<li class="nav-leaf"><a href="/payment-menu/payment-order#payment-url">Payment Url</a></li>
<li class="nav-leaf"><a href="/payment-menu/payment-order#step-2-display-the-payment-menu">Step 2: Display the Payment Menu</a></li>
</ul>
</li>
</ul>
</li>
<li class="nav-group">
<div class="nav-group-heading">
<i class="material-icons">arrow_right</i><span>Payments</span>
</div>
<ul class="nav-ul">
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/">Payments</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/#prerequisites">Prerequisites</a></li>
<li class="nav-leaf"><a href="/payments/#platform-options">Platform options</a></li>
<li class="nav-leaf"><a href="/payments/#the-fundamentals">The Fundamentals</a></li>
<li class="nav-leaf"><a href="/payments/#the-payment-object">The Payment Object</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/card/"> Introduction</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf nav-subgroup-leaf"><a href="/payments/card/"> Introduction overview</a></li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/card/after-payment"> After Payment</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/card/after-payment#options-after-posting-a-payment">Options after posting a payment</a></li>
<li class="nav-leaf"><a href="/payments/card/after-payment#cancellations">Cancellations</a></li>
<li class="nav-leaf"><a href="/payments/card/after-payment#reversals">Reversals</a></li>
<li class="nav-leaf"><a href="/payments/card/after-payment#abort">Abort</a></li>
<li class="nav-leaf"><a href="/payments/card/after-payment#remove-payment-token">Remove payment token</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/card/capture"> Capture</a>
</div>
<ul class="nav-ul"><li class="nav-leaf"><a href="/payments/card/capture#capture">Capture</a></li></ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/card/direct"> Direct</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/card/direct#payment-flow">Payment flow</a></li>
<li class="nav-leaf"><a href="/payments/card/direct#step-1-create-a-purchase">Step 1: Create a Purchase</a></li>
<li class="nav-leaf"><a href="/payments/card/direct#step-2a-create-authorization-without-3-d-secure-authentication">Step 2a: Create authorization without 3-D Secure authentication</a></li>
<li class="nav-leaf"><a href="/payments/card/direct#step-2b-create-authorization-with-3-d-secure-authentication">Step 2b: Create authorization with 3-D Secure authentication</a></li>
<li class="nav-leaf"><a href="/payments/card/direct#options-after-posting-a-purchase-payment">Options after posting a purchase payment</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/card/mobile-card-payments"> Mobile</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/card/mobile-card-payments#card-payments-in-mobile-apps">Card Payments in Mobile Apps</a></li>
<li class="nav-leaf"><a href="/payments/card/mobile-card-payments#api-requests-for-payments">API Requests for Payments</a></li>
<li class="nav-leaf"><a href="/payments/card/mobile-card-payments#purchase-flow-mobile">Purchase flow mobile</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/card/other-features"> Other Features</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/card/other-features#payment-resource">Payment Resource</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#payment-and-transaction-states">Payment And Transaction States</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#create-payment">Create Payment</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#purchase">Purchase</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#completeurl">CompleteUrl</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#description">Description</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#recur">Recur</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#unscheduled-purchase">Unscheduled Purchase</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#payout">Payout</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#verify">Verify</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#one-click-payments">One-Click Payments</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#payment-url">Payment Url</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#callback">Callback</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#payment-link">Payment Link</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#transactions">Transactions</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#card-authorization-transaction">Card authorization transaction</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#payeeinfo">PayeeInfo</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#payee-reference">Payee Reference</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#prices">Prices</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#3-d-secure-2">3-D Secure 2</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#co-badge-card-choice-for-dankort">Co-badge Card Choice for Dankort</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#metadata">Metadata</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#settlement-and-reconciliation">Settlement and Reconciliation</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#problems">Problems</a></li>
<li class="nav-leaf"><a href="/payments/card/other-features#seamless-view-events">Seamless View Events</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/card/redirect"> Redirect</a>
</div>
<ul class="nav-ul"><li class="nav-leaf"><a href="/payments/card/redirect#step-1-create-a-purchase">Step 1: Create a Purchase</a></li></ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/card/seamless-view"> Seamless View</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/card/seamless-view#introduction">Introduction</a></li>
<li class="nav-leaf"><a href="/payments/card/seamless-view#step-1-create-payment">Step 1: Create Payment</a></li>
<li class="nav-leaf"><a href="/payments/card/seamless-view#step-2-display-the-payment">Step 2: Display the Payment</a></li>
<li class="nav-leaf"><a href="/payments/card/seamless-view#purchase-flow">Purchase Flow</a></li>
</ul>
</li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/invoice/">Invoice Payments</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf nav-subgroup-leaf"><a href="/payments/invoice/">Invoice Payments overview</a></li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/invoice/after-payment">Payments Invoice After Payment</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/invoice/after-payment#options-after-posting-a-payment">Options after posting a payment</a></li>
<li class="nav-leaf"><a href="/payments/invoice/after-payment#abort">Abort</a></li>
<li class="nav-leaf"><a href="/payments/invoice/after-payment#cancellations">Cancellations</a></li>
<li class="nav-leaf"><a href="/payments/invoice/after-payment#reversals">Reversals</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/invoice/capture">Payments Invoice Capture</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/invoice/capture#capture">Capture</a></li>
<li class="nav-leaf"><a href="/payments/invoice/capture#step-1-create-financingconsumer-capture">Step 1: Create FinancingConsumer Capture</a></li>
<li class="nav-leaf"><a href="/payments/invoice/capture#step-2-inspecting-the-captures">Step 2: Inspecting the Captures</a></li>
<li class="nav-leaf"><a href="/payments/invoice/capture#capture-flow">Capture Flow</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/invoice/direct">Payments Invoice Direct</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/invoice/direct#invoice-direct-implementation-flow">Invoice Direct implementation flow</a></li>
<li class="nav-leaf"><a href="/payments/invoice/direct#step-1-create-a-purchase">Step 1: Create a Purchase</a></li>
<li class="nav-leaf"><a href="/payments/invoice/direct#step-2-get-approvedlegaladdress-confirmation">Step 2: Get approvedLegalAddress confirmation</a></li>
<li class="nav-leaf"><a href="/payments/invoice/direct#step-3-complete-a-payment">Step 3: Complete a Payment</a></li>
<li class="nav-leaf"><a href="/payments/invoice/direct#invoice-flow">Invoice flow</a></li>
<li class="nav-leaf"><a href="/payments/invoice/direct#options-after-posting-a-purchase-payment">Options after posting a purchase payment</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/invoice/other-features"> Other Features</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/invoice/other-features#api-requests">API requests</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#payment-resource">Payment Resource</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#payment-and-transaction-states">Payment And Transaction States</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#create-payment">Create Payment</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#financing-consumer">Financing Consumer</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#recur">Recur</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#verify">Verify</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#transactions">Transactions</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#callback">Callback</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#payment-link">Payment Link</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#completeurl">CompleteUrl</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#description">Description</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#payeeinfo">PayeeInfo</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#payee-reference">Payee Reference</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#prices">Prices</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#metadata">Metadata</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#settlement-and-reconciliation">Settlement and Reconciliation</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#problems">Problems</a></li>
<li class="nav-leaf"><a href="/payments/invoice/other-features#seamless-view-events">Seamless View Events</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/invoice/redirect">Payments Invoice Redirect</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/invoice/redirect#introduction">Introduction</a></li>
<li class="nav-leaf"><a href="/payments/invoice/redirect#step-1-create-a-payment">Step 1: Create a payment</a></li>
<li class="nav-leaf"><a href="/payments/invoice/redirect#invoice-flow">Invoice flow</a></li>
<li class="nav-leaf"><a href="/payments/invoice/redirect#options-after-posting-a-payment">Options after posting a payment</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/invoice/seamless-view"> Seamless View</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/invoice/seamless-view#introduction">Introduction</a></li>
<li class="nav-leaf"><a href="/payments/invoice/seamless-view#step-1-create-the-payment">Step 1: Create the payment</a></li>
<li class="nav-leaf"><a href="/payments/invoice/seamless-view#step-2-display-the-payment">Step 2: Display the Payment</a></li>
<li class="nav-leaf"><a href="/payments/invoice/seamless-view#purchase-flow">Purchase Flow</a></li>
</ul>
</li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/mobile-pay/">MobilePay Online Payments</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf nav-subgroup-leaf"><a href="/payments/mobile-pay/">MobilePay Online Payments overview</a></li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/mobile-pay/after-payment"> After Payment</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/mobile-pay/after-payment#options-after-posting-a-payment">Options after posting a payment</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/after-payment#capture">Capture</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/after-payment#create-capture-transaction">Create capture transaction</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/after-payment#capture-sequence">Capture Sequence</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/after-payment#cancellations">Cancellations</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/after-payment#cancel-sequence">Cancel Sequence</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/after-payment#reversals">Reversals</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/after-payment#create-reversal-transaction">Create reversal transaction</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/after-payment#reversal-sequence">Reversal Sequence</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/after-payment#abort">Abort</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/mobile-pay/other-features"> Other Features</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#payment-resource">Payment Resource</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#purchase">Purchase</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#operations-1">Operations</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#completeurl">CompleteUrl</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#mobilepay-online-transactions">MobilePay Online transactions</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#authorizations">Authorizations</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#captures">Captures</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#cancellations">Cancellations</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#reversals">Reversals</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#capture-sequence">Capture Sequence</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#cancel-sequence">Cancel Sequence</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#reversal-sequence">Reversal Sequence</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#settlement-and-reconciliation">Settlement and Reconciliation</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#payment-link">Payment Link</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#description">Description</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#callback">Callback</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#transactions">Transactions</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#prices">Prices</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#metadata">Metadata</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#payeeinfo">PayeeInfo</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#payee-reference">Payee Reference</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/other-features#problems">Problems</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/mobile-pay/redirect"> Redirect</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/mobile-pay/redirect#mobilepay-redirect-integration-flow">MobilePay redirect integration flow</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/redirect#step-1-create-a-purchase">Step 1: Create a Purchase</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/redirect#step-2-get-the-transaction-status">Step 2: Get the transaction status</a></li>
<li class="nav-leaf"><a href="/payments/mobile-pay/redirect#purchase-flow">Purchase flow</a></li>
</ul>
</li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/swish/">Payments Swish</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf nav-subgroup-leaf"><a href="/payments/swish/">Payments Swish overview</a></li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/swish/after-payment">Payments Swish After Payment</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/swish/after-payment#options-after-posting-a-payment">Options after posting a payment</a></li>
<li class="nav-leaf"><a href="/payments/swish/after-payment#swish-transactions">Swish transactions</a></li>
<li class="nav-leaf"><a href="/payments/swish/after-payment#sales">Sales</a></li>
<li class="nav-leaf"><a href="/payments/swish/after-payment#reversals">Reversals</a></li>
<li class="nav-leaf"><a href="/payments/swish/after-payment#abort">Abort</a></li>
<li class="nav-leaf"><a href="/payments/swish/after-payment#capture">Capture</a></li>
<li class="nav-leaf"><a href="/payments/swish/after-payment#cancel">Cancel</a></li>
<li class="nav-leaf"><a href="/payments/swish/after-payment#recurring">Recurring</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/swish/direct">Payments Swish Direct</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/swish/direct#payment-flow">Payment Flow</a></li>
<li class="nav-leaf"><a href="/payments/swish/direct#step-1-create-a-purchase">Step 1: Create a Purchase</a></li>
<li class="nav-leaf"><a href="/payments/swish/direct#step-2a-create-e-commerce-sale-transaction">Step 2a: Create E-Commerce Sale Transaction</a></li>
<li class="nav-leaf"><a href="/payments/swish/direct#e-commerce-purchase-flow">E-Commerce Purchase Flow</a></li>
<li class="nav-leaf"><a href="/payments/swish/direct#step-2b-create-m-commerce-sale-transaction">Step 2b: Create M-Commerce Sale Transaction</a></li>
<li class="nav-leaf"><a href="/payments/swish/direct#step-3-get-the-payment-status">Step 3: Get the payment status</a></li>
<li class="nav-leaf"><a href="/payments/swish/direct#m-commerce-purchase-flow">M-Commerce Purchase Flow</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/swish/other-features">Payments Swish Other Features</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/swish/other-features#payment-resource">Payment Resource</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#payment-and-transaction-states">Payment And Transaction States</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#create-payment">Create Payment</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#settlement-and-reconciliation">Settlement and Reconciliation</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#payment-link">Payment Link</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#description">Description</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#completeurl">CompleteUrl</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#payment-url">Payment Url</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#prices">Prices</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#payeeinfo">PayeeInfo</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#payee-reference">Payee Reference</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#transactions">Transactions</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#callback">Callback</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#metadata">Metadata</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#problems">Problems</a></li>
<li class="nav-leaf"><a href="/payments/swish/other-features#seamless-view-events">Seamless View Events</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/swish/redirect">Payments Swish Redirect</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/swish/redirect#introduction">Introduction</a></li>
<li class="nav-leaf"><a href="/payments/swish/redirect#step-1-create-a-purchase">Step 1: Create a Purchase</a></li>
<li class="nav-leaf"><a href="/payments/swish/redirect#redirect-purchase-flow">Redirect Purchase flow</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/swish/seamless-view">Payments Swish Seamless View</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/swish/seamless-view#swish-seamless-view-integration-flow">Swish Seamless View integration flow</a></li>
<li class="nav-leaf"><a href="/payments/swish/seamless-view#step-1-create-a-purchase">Step 1: Create a Purchase</a></li>
<li class="nav-leaf"><a href="/payments/swish/seamless-view#payment-url">Payment Url</a></li>
<li class="nav-leaf"><a href="/payments/swish/seamless-view#step-2-display-the-payment-window">Step 2: Display the Payment Window</a></li>
<li class="nav-leaf"><a href="/payments/swish/seamless-view#seamless-view-purchase-flow">Seamless View Purchase flow</a></li>
</ul>
</li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/trustly/">Trustly Payments</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf nav-subgroup-leaf"><a href="/payments/trustly/">Trustly Payments overview</a></li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/trustly/after-payment"> After Payment</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/trustly/after-payment#options-after-posting-a-payment">Options after posting a payment</a></li>
<li class="nav-leaf"><a href="/payments/trustly/after-payment#abort">Abort</a></li>
<li class="nav-leaf"><a href="/payments/trustly/after-payment#reversals">Reversals</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/trustly/other-features"> Other Features</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/trustly/other-features#payment-resource">Payment Resource</a></li>
<li class="nav-leaf"><a href="/payments/trustly/other-features#payment-and-transaction-states">Payment And Transaction States</a></li>
<li class="nav-leaf"><a href="/payments/trustly/other-features#create-payment">Create Payment</a></li>
<li class="nav-leaf"><a href="/payments/trustly/other-features#transactions">Transactions</a></li>
<li class="nav-leaf"><a href="/payments/trustly/other-features#callback">Callback</a></li>
<li class="nav-leaf"><a href="/payments/trustly/other-features#completeurl">CompleteUrl</a></li>
<li class="nav-leaf"><a href="/payments/trustly/other-features#description">Description</a></li>
<li class="nav-leaf"><a href="/payments/trustly/other-features#payeeinfo">PayeeInfo</a></li>
<li class="nav-leaf"><a href="/payments/trustly/other-features#payee-reference">Payee Reference</a></li>
<li class="nav-leaf"><a href="/payments/trustly/other-features#settlement-and-reconciliation">Settlement and Reconciliation</a></li>
<li class="nav-leaf"><a href="/payments/trustly/other-features#metadata">Metadata</a></li>
<li class="nav-leaf"><a href="/payments/trustly/other-features#problems">Problems</a></li>
<li class="nav-leaf"><a href="/payments/trustly/other-features#seamless-view-events">Seamless View Events</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/trustly/redirect"> Redirect</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/trustly/redirect#introduction">Introduction</a></li>
<li class="nav-leaf"><a href="/payments/trustly/redirect#step-1-create-a-payment">Step 1: Create a payment</a></li>
<li class="nav-leaf"><a href="/payments/trustly/redirect#trustly-flow">Trustly flow</a></li>
<li class="nav-leaf"><a href="/payments/trustly/redirect#options-after-posting-a-payment">Options after posting a payment</a></li>
</ul>
</li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/vipps/">Payments Vipps</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf nav-subgroup-leaf"><a href="/payments/vipps/">Payments Vipps overview</a></li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/vipps/after-payment">Payments Vipps After Payment</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/vipps/after-payment#operations">Operations</a></li>
<li class="nav-leaf"><a href="/payments/vipps/after-payment#vipps-transactions">Vipps transactions</a></li>
<li class="nav-leaf"><a href="/payments/vipps/after-payment#authorizations">Authorizations</a></li>
<li class="nav-leaf"><a href="/payments/vipps/after-payment#captures">Captures</a></li>
<li class="nav-leaf"><a href="/payments/vipps/after-payment#create-capture-transaction">Create capture transaction</a></li>
<li class="nav-leaf"><a href="/payments/vipps/after-payment#cancellations">Cancellations</a></li>
<li class="nav-leaf"><a href="/payments/vipps/after-payment#create-cancellation-transaction">Create cancellation transaction</a></li>
<li class="nav-leaf"><a href="/payments/vipps/after-payment#reversals">Reversals</a></li>
<li class="nav-leaf"><a href="/payments/vipps/after-payment#abort">Abort</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/vipps/other-features">Payments Vipps Other Features</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/vipps/other-features#payment-resource">Payment Resource</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#payment-and-transaction-states">Payment And Transaction States</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#completeurl">CompleteUrl</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#payment-url">Payment Url</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#prices">Prices</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#description">Description</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#payeeinfo">PayeeInfo</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#payee-reference">Payee Reference</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#payee-reference-1">Payee Reference</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#transactions">Transactions</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#callback">Callback</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#payment-link">Payment Link</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#metadata">Metadata</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#problems">Problems</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#seamless-view-events">Seamless View Events</a></li>
<li class="nav-leaf"><a href="/payments/vipps/other-features#settlement-and-reconciliation">Settlement and Reconciliation</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/vipps/redirect">Payments Vipps Redirect</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/vipps/redirect#introduction">Introduction</a></li>
<li class="nav-leaf"><a href="/payments/vipps/redirect#step-1-create-a-purchase">Step 1: Create a Purchase</a></li>
<li class="nav-leaf"><a href="/payments/vipps/redirect#step-2-authorization">Step 2: Authorization</a></li>
<li class="nav-leaf"><a href="/payments/vipps/redirect#step-3-get-the-transaction-state">Step 3: Get the transaction state</a></li>
<li class="nav-leaf"><a href="/payments/vipps/redirect#vipps-redirect-integration-flow">Vipps Redirect integration flow</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/payments/vipps/seamless-view">Payments Vipps Seamless View</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/payments/vipps/seamless-view#step-1-create-a-purchase">Step 1: Create a Purchase</a></li>
<li class="nav-leaf"><a href="/payments/vipps/seamless-view#payment-url">Payment Url</a></li>
<li class="nav-leaf"><a href="/payments/vipps/seamless-view#step-2-display-the-payment-window">Step 2: Display the payment window</a></li>
<li class="nav-leaf"><a href="/payments/vipps/seamless-view#step-3-create-authorization-transaction">Step 3: Create authorization transaction</a></li>
<li class="nav-leaf"><a href="/payments/vipps/seamless-view#vipps-seamless-view-integration-flow">Vipps Seamless View integration flow</a></li>
</ul>
</li>
</ul>
</li>
<li class="nav-leaf nav-subgroup-leaf"><a href="/payments/payment-link">Payment Link</a></li>
</ul>
</li>
<li class="nav-group">
<div class="nav-group-heading">
<i class="material-icons">arrow_right</i><span>Resources </span>
</div>
<ul class="nav-ul">
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/resources/"> Introduction</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/resources/#test-data">Test Data</a></li>
<li class="nav-leaf"><a href="/resources/#demoshop">Demoshop</a></li>
<li class="nav-leaf"><a href="/resources/#open-source-development-guidelines">Open Source Development Guidelines</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/resources/data-protection">Data Protection</a>
</div>
<ul class="nav-ul"><li class="nav-leaf"><a href="/resources/data-protection#paymentorder-consumer-data">Paymentorder consumer data</a></li></ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/resources/development-guidelines/">Open Source Development Guidelines</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf nav-subgroup-leaf"><a href="/resources/development-guidelines/">Open Source Development Guidelines overview</a></li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/resources/development-guidelines/code-of-conduct">Code Of Conduct</a>
</div>
<ul class="nav-ul"><li class="nav-leaf"><a href="/resources/development-guidelines/code-of-conduct#contributor-code-of-conduct">Contributor Code of Conduct</a></li></ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/resources/development-guidelines/contributing">Contributing</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/resources/development-guidelines/contributing#how-to-contribute">How to contribute</a></li>
<li class="nav-leaf"><a href="/resources/development-guidelines/contributing#getting-started">Getting Started</a></li>
<li class="nav-leaf"><a href="/resources/development-guidelines/contributing#making-changes">Making Changes</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/resources/development-guidelines/good-commit-practice">Good Commit Practice</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/resources/development-guidelines/good-commit-practice#executive-summary">Executive Summary</a></li>
<li class="nav-leaf"><a href="/resources/development-guidelines/good-commit-practice#structural-split-of-changes">Structural split of changes</a></li>
<li class="nav-leaf"><a href="/resources/development-guidelines/good-commit-practice#things-to-avoid-when-creating-commits">Things to avoid when creating commits</a></li>
<li class="nav-leaf"><a href="/resources/development-guidelines/good-commit-practice#information-in-commit-messages">Information in commit messages</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/resources/development-guidelines/license">License</a>
</div>
<ul class="nav-ul"><li class="nav-leaf"><a href="/resources/development-guidelines/license#licensing">Licensing</a></li></ul>
</li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/resources/release-notes">Release Notes</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/resources/release-notes#04-sep-2020">04 Sep 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#28-aug-2020">28 Aug 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#21-aug-2020">21 Aug 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#17-july-2020">17 July 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#10-july-2020">10 July 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#07-july-2020">07 July 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#04-june-2020">04 June 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#29-may-2020">29 May 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#22-may-2020">22 May 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#14-may-2020">14 May 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#07-may-2020">07 May 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#april-2020">April 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#march-2020">March 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#february-2020">February 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#january-2020">January 2020</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#december-2019">December 2019</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#november-2019">November 2019</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#october-2019">October 2019</a></li>
<li class="nav-leaf"><a href="/resources/release-notes#august-2019">August 2019</a></li>
</ul>
</li>
<li class="nav-subgroup">
<div class="nav-subgroup-heading">
<i class="material-icons">arrow_right</i><a href="/resources/test-data">Test Data</a>
</div>
<ul class="nav-ul">
<li class="nav-leaf"><a href="/resources/test-data#swedbank-pay-checkout-test-data">Swedbank Pay Checkout Test Data</a></li>
<li class="nav-leaf"><a href="/resources/test-data#credit-card-test-data">Credit Card Test Data</a></li>
<li class="nav-leaf"><a href="/resources/test-data#failure-testing">Failure Testing</a></li>
<li class="nav-leaf"><a href="/resources/test-data#invoice-test-data">Invoice Test Data</a></li>
<li class="nav-leaf"><a href="/resources/test-data#invoice-service-test-data">Invoice Service Test Data</a></li>
<li class="nav-leaf"><a href="/resources/test-data#vipps-test-data">Vipps Test Data</a></li>
<li class="nav-leaf"><a href="/resources/test-data#swish-test-data">Swish Test Data</a></li>
</ul>
</li>
<li class="nav-leaf nav-subgroup-leaf"><a href="/resources/demoshop">Demoshop</a></li>
<li class="nav-leaf nav-subgroup-leaf"><a href="/resources/public-migration-key">Public Migration Key</a></li>
<li class="nav-leaf nav-subgroup-leaf"><a href="/resources/terminology">Terminology</a></li>
</ul>
</li>
</ul>
                            </nav>
                        </div>
                    </div>

                    <main class="doc-view col-xxl-10 col-lg-9">
                        
                        
                        
                        
                        
                        <div class="title-header">
                            <div class="title-header-container
                                     max-width
                                    ">
                                
                                <h4>Mobile-sdk </h4>
                                
                                <h1> iOS</h1>
                                
                                <div class="title-header-estimated-read">
                                    <i class="material-icons">schedule</i>
                                    30 min read
                                </div>
                                
                                
                            </div>
                        </div>
                        
                        <div class="doc-container normal-padding max-width
                            ">
                            <article>
                                <div class="alert alert-complex alert-warning">
<header class="alert-header">
        
        <i class="material-icons alert-icon">warning</i>
      <h3>
        
        
          Unsupported
        
        
      </h3></header>
    

    
    
    <div class="alert-body">
        <p>The SDK is at an early stage of development
and is not supported as of yet by Swedbank Pay. It is provided as a
convenience to speed up your development, so please feel free to play around.
However, if you need support, please wait for a future, stable release.</p>
    </div>
    
    
</div>
    
      <h2 id="installation">
        
        
          Installation <a href="#installation" class="header-anchor"></a>
        
        
      </h2>

<p>The iOS component of the Swedbank Pay Mobile SDK is distributed through <a href="https://cocoapods.org/">CocoaPods</a>. If you do not have CocoaPods installed on your development machine, please install it first according to the <a href="https://guides.cocoapods.org/using/getting-started.html">instructions</a> at the CocoaPods web page.</p>

<p><a href="https://guides.cocoapods.org/using/using-cocoapods.html">Add CocoaPods</a> to your project, if needed. Then, add the dependency:</p>

<p><code class="language-html highlighter-rouge">pod 'SwedbankPaySDK', '0.1.23'</code></p>

<p>[Development note: There is not yet a stable release of the SDK. Be prepared for potential API changes before the first stable release.]</p>

<p>Do not forget to run <code class="language-html highlighter-rouge">pod install</code> after editing the <code class="language-html highlighter-rouge">Podfile</code>.</p>
    
      <h3 id="url-scheme-and-associated-domain">
        
        
          Url Scheme and Associated Domain <a href="#url-scheme-and-associated-domain" class="header-anchor"></a>
        
        
      </h3>

<p>The <a href="/checkout/payment-menu#payment-url">Payment Url</a> handling in the iOS SDK uses <a href="https://developer.apple.com/documentation/uikit/inter-process_communication/allowing_apps_and_websites_to_link_to_your_content">Universal Links</a>, and additionaly a <a href="https://developer.apple.com/documentation/uikit/inter-process_communication/allowing_apps_and_websites_to_link_to_your_content/defining_a_custom_url_scheme_for_your_app">custom url scheme</a> as a fallback mechanism. You must therefore set these up in the app before using the SDK.</p>

<p>The easiest way to add a url scheme to your app is to select the project file, go to the <code class="language-html highlighter-rouge">Info</code> tab, scroll down to <code class="language-html highlighter-rouge">URL Types</code>, and click the <code class="language-html highlighter-rouge">+</code> button to add a new scheme. Insert a single <strong>unique</strong> url scheme to the <code class="language-html highlighter-rouge">URL Schemes</code> field. You can choose the url <code class="language-html highlighter-rouge">Identifier</code> freely, but remember that that too should be unique. The <code class="language-html highlighter-rouge">Role</code> for the url type should be <code class="language-html highlighter-rouge">Editor</code>. Finally, to mark this url type as the Swedbank Pay payment url scheme, open the <code class="language-html highlighter-rouge">Additional url type properties</code>, and add a property with the key <code class="language-html highlighter-rouge">com.swedbank.SwedbankPaySDK.callback</code>, type <code class="language-html highlighter-rouge">Boolean</code>, and value <code class="language-html highlighter-rouge">YES</code>.</p>

<p><img src="/assets/img/mobile-sdk/ios-custom-scheme-1.png" alt="Payment url scheme added in project Info tab"></p>

<p>You can also edit the <code class="language-html highlighter-rouge">Info.plist</code> file directly, if you wish.</p>

<p><img src="/assets/img/mobile-sdk/ios-custom-scheme-2.png" alt="Payment url scheme added in Info.plist editor"></p>

<p>To set up universal links in your application, you first need to <a href="https://help.apple.com/xcode/mac/current/#/dev88ff319e7">add the Associated Domains capability</a>. Then, add your Merchant Backend’s domain as an <a href="https://developer.apple.com/documentation/safariservices/supporting_associated_domains_in_your_app#3001207"><code class="language-html highlighter-rouge">applinks</code> associated domain</a>. Additionally, your merchant backend must have the appropriate <a href="merchant-backend#apple-app-site-association">Apple App Site Association</a> file configured.</p>

<p><img src="/assets/img/mobile-sdk/ios-assoc-domain.png" alt="Associated Domains Configured"></p>
    
      <h2 id="usage">
        
        
          Usage <a href="#usage" class="header-anchor"></a>
        
        
      </h2>

<pre><code class="language-mermaid">sequenceDiagram
    participant App
    participant SDK
    participant Merchant
    participant SwedbankPay as Swedbank Pay
    participant Ext as External App

    rect rgba(238, 112, 35, 0.05)
        note left of App: Configuration
        App -&gt;&gt; SDK: SwedbankPaySDK.Configuration(backendUrl: "https://example.com/swedbank-pay-mobile/", headers: [:])
        SDK --&gt;&gt; App: configuration
    end

    opt Unless Guest Payment
        App -&gt;&gt; SDK: SwedbankPaySDK.Consumer(language = ..., shippingAddressRestrictedToCountryCodes = ...)
        SDK --&gt;&gt; App: consumer
    end

    rect rgba(138, 205, 195, 0.1)
        note left of App: Prepare Payment
        App -&gt;&gt; SDK: PaymentOrderUrls(configuration: configuration, language: ...)
        SDK --&gt;&gt; App: paymentOrderUrls
        App -&gt;&gt; SDK: PaymentOrder(urls: paymentOrderUrls, ...)
        SDK --&gt;&gt; App: paymentOrder
    end

    App -&gt;&gt; SDK: SwedbankPaySDKController(configuration: configuration, consumer: consumer, paymentOrder: paymentOrder)
    SDK --&gt;&gt; App: swedbankPaySdkController
    App -&gt;&gt; SDK: swedbankPaySdkController.delegate = ...
    App -&gt;&gt; App: Show swedbankPaySdkController

    rect rgba(138, 205, 195, 0.1)
        note left of App: Discover Endpoints
        SDK -&gt;&gt; Merchant: GET /swedbank-pay-mobile/
        Merchant --&gt;&gt; SDK: { "consumers": "/swedbank-pay-mobile/consumers", "paymentorders": "/swedbank-pay-mobile/paymentorders" }
    end

    opt Unless Guest Payment
        SDK -&gt;&gt; Merchant: POST /swedbank-pay-mobile/consumers
        Merchant -&gt;&gt; SwedbankPay: POST /psp/consumers
        SwedbankPay --&gt;&gt; Merchant: rel: view-consumer-identification
        Merchant --&gt;&gt; SDK: rel: view-consumer-identification
        SDK -&gt;&gt; SDK: Show html page with view-consumer-identification
        SwedbankPay -&gt;&gt; SDK: Consumer identification process
        SDK -&gt;&gt; SwedbankPay: Consumer identification process
        SwedbankPay -&gt;&gt; SDK: consumerProfileRef
        SDK -&gt;&gt; SDK: paymentOrder.payer = { consumerProfileRef }
    end

    rect rgba(138, 205, 195, 0.1)
        note left of App: Payment Menu
        SDK -&gt;&gt; Merchant: POST /swedbank-pay-mobile/paymentorders
        Merchant -&gt;&gt; SwedbankPay: POST /psp/paymentorders
        SwedbankPay --&gt;&gt; Merchant: rel: view-paymentorder
        Merchant --&gt;&gt; SDK: rel: view-paymentorder
        SDK -&gt;&gt; SDK: Show html page with view-paymentorder
        SwedbankPay -&gt;&gt; SDK: Payment process
        SDK -&gt;&gt; SwedbankPay: Payment process
        opt Redirect to Third-Party Page inside SwedbankPaySDKController ①
            SDK -&gt;&gt; SDK: Show third-party page
            SDK -&gt;&gt; SDK: Intercept navigation to paymentUrl
            SDK -&gt;&gt; SDK: Reload html page with view-paymentorder
        end
        opt Redirect to Third-Party Page in Safari ②
            SDK -&gt;&gt; Ext: Launch Safari
            Ext -&gt;&gt; SDK: Return from Safari
        end
        opt Launch External Application
            SDK -&gt;&gt; Ext: Start external application
            Ext -&gt;&gt; SDK: Return from external application ③
        end
        SDK -&gt;&gt; SDK: Intercept navigation to completeUrl
        SDK -&gt;&gt; SDK: delegate.paymentComplete()
    end

    App -&gt;&gt; App: Remove paymentFragment
</code></pre>

<ul>
  <li>① Only pages tested to work with WKWebView are opened inside SwedbankPaySDKController. This list is updated as new pages are verified.</li>
  <li>② Other pages are opened in Safari. See <a href="#payment-url-and-external-applications">the section on external applications</a> for details on how the process returns to the SDK afterwards.</li>
  <li>③ See <a href="#payment-url-and-external-applications">the section on external applications</a> for details.</li>
</ul>

<p>The iOS SDK is contained in the module <code class="language-html highlighter-rouge">SwedbankPaySDK</code>.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td>
<td class="rouge-code"><pre><span class="kd">import</span> <span class="kt">SwedbankPaySDK</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p>The main component of the SDK is <code class="language-html highlighter-rouge">SwedbankPaySDKController</code>, a <code class="language-html highlighter-rouge">UIViewController</code> that handles a single payment order. When initializing a <code class="language-html highlighter-rouge">SwedbankPaySDKController</code>, you must provide a <code class="language-html highlighter-rouge">SwedbankPaySDK.Configuration</code> that describes the server environment the <code class="language-html highlighter-rouge">SwedbankPaySDKController</code> is working with, along with a <code class="language-html highlighter-rouge">SwedbankPaySDK.PaymentOrder</code>, and, unless making a guest payment, a <code class="language-html highlighter-rouge">SwedbankPaySDK.Consumer</code>. Providing a <code class="language-html highlighter-rouge">SwedbankPaySDK.Consumer</code> makes future payments by the same payer easier.</p>

<p>The <code class="language-html highlighter-rouge">SwedbankPaySDK.Configuration</code> is, in most cases, static for a given server environment. Therefore, it makes sense to keep it in a convenient constant. The <code class="language-html highlighter-rouge">SwedbankPaySDK.Configuration</code> constructor can determine your application’s custom scheme for payment urls automatically, if you have set it up as described above.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td>
<td class="rouge-code"><pre><span class="k">let</span> <span class="nv">swedbankPayConfig</span> <span class="o">=</span> <span class="kt">SwedbankPaySDK</span><span class="o">.</span><span class="kt">Configuration</span><span class="p">(</span>
    <span class="nv">backendUrl</span><span class="p">:</span> <span class="s">"https://example.com/swedbank-pay-mobile/"</span><span class="p">,</span>
    <span class="nv">headers</span><span class="p">:</span> <span class="p">[:]</span>
<span class="p">)</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p>The semantics of <code class="language-html highlighter-rouge">SwedbankPaySDK.Consumer</code> properties are the same as the fields of the <a href="/checkout/checkin#step-1-initiate-session-for-consumer-identification">POST /psp/consumers</a>. There are default values for the <code class="language-html highlighter-rouge">operation</code> and <code class="language-html highlighter-rouge">language</code> properties (<code class="language-html highlighter-rouge">.InitiateConsumerSession</code> and <code class="language-html highlighter-rouge">.English</code>, respectively).</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td>
<td class="rouge-code"><pre><span class="k">let</span> <span class="nv">consumer</span> <span class="o">=</span> <span class="kt">SwedbankPaySDK</span><span class="o">.</span><span class="kt">Consumer</span><span class="p">(</span>
    <span class="n">language</span> <span class="o">=</span> <span class="o">.</span><span class="kt">Swedish</span><span class="p">,</span>
    <span class="nv">shippingAddressRestrictedToCountryCodes</span><span class="p">:</span> <span class="o">=</span> <span class="p">[</span><span class="s">"NO"</span><span class="p">,</span> <span class="s">"SE"</span><span class="p">,</span> <span class="s">"DK"</span><span class="p">]</span>
<span class="p">)</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p>Similarly, the semantics of <code class="language-html highlighter-rouge">SwedbankPaySDK.PaymentOrder</code> properties are the same as the fields of the <a href="/checkout/payment-menu#step-3-create-payment-order">POST /psp/paymentorders</a> request. Sensible default values are provided for many of the properties. In a similar fashion to how the Android SDK works, while there is no default value for the <code class="language-html highlighter-rouge">urls</code> property, there are convenience constructors for the <code class="language-html highlighter-rouge">SwedbankPaySDK.PaymentOrderUrls</code> type, which are recommended for general use. Assuming you have the iOS Payment Url Helper endpoint set up with the specified static path relative to your backend url (i.e. <code class="language-html highlighter-rouge">sdk-callback/ios-universal-link</code>), then using one of the <code class="language-html highlighter-rouge">SwedbankPaySDK.Configuration</code> taking convenience constructors variants will set the <code class="language-html highlighter-rouge">paymentUrl</code> correctly.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre></td>
<td class="rouge-code"><pre><span class="k">let</span> <span class="nv">paymentOrder</span> <span class="o">=</span> <span class="kt">SwedbankPaySDK</span><span class="o">.</span><span class="kt">PaymentOrder</span><span class="p">(</span>
    <span class="n">currency</span> <span class="o">=</span> <span class="s">"SEK"</span><span class="p">,</span>
    <span class="n">amount</span> <span class="o">=</span> <span class="mi">1500</span><span class="p">,</span>
    <span class="n">vatAmount</span> <span class="o">=</span> <span class="mi">375</span><span class="p">,</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s">"Test Purchase"</span><span class="p">,</span>
    <span class="n">language</span> <span class="o">=</span> <span class="o">.</span><span class="kt">Swedish</span><span class="p">,</span>
    <span class="n">urls</span> <span class="o">=</span> <span class="kt">SwedbankPaySDK</span><span class="o">.</span><span class="kt">PaymentOrderUrls</span><span class="p">(</span>
        <span class="nv">configuration</span><span class="p">:</span> <span class="n">swedbankPayConfig</span><span class="p">,</span>
        <span class="nv">language</span><span class="p">:</span> <span class="o">.</span><span class="kt">Swedish</span>
    <span class="p">),</span>
    <span class="n">payeeInfo</span> <span class="o">=</span> <span class="kt">SwedbankPaySDK</span><span class="o">.</span><span class="kt">PayeeInfo</span><span class="p">(</span>
        <span class="c1">// ①</span>
        <span class="n">payeeName</span> <span class="o">=</span> <span class="s">"Merchant1"</span><span class="p">,</span>
        <span class="n">productCategory</span> <span class="o">=</span> <span class="s">"A123"</span><span class="p">,</span>
        <span class="n">orderReference</span> <span class="o">=</span> <span class="s">"or-123456"</span><span class="p">,</span>
        <span class="n">subsite</span> <span class="o">=</span> <span class="s">"MySubsite"</span>
    <span class="p">),</span>

    <span class="n">orderItems</span> <span class="o">=</span> <span class="p">[</span>
        <span class="kt">SwedbankPaySDK</span><span class="o">.</span><span class="kt">OrderItem</span><span class="p">(</span>
            <span class="n">reference</span> <span class="o">=</span> <span class="s">"P1"</span><span class="p">,</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s">"Product1"</span><span class="p">,</span>
            <span class="n">type</span> <span class="o">=</span> <span class="o">.</span><span class="kt">Product</span><span class="p">,</span>
            <span class="kd">class</span> <span class="o">=</span> <span class="s">"ProductGroup1"</span><span class="p">,</span>
            <span class="n">itemUrl</span> <span class="o">=</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"https://example.com/products/123"</span><span class="p">),</span>
            <span class="n">imageUrl</span> <span class="o">=</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"https://example.com/product123.jpg"</span><span class="p">),</span>
            <span class="n">description</span> <span class="o">=</span> <span class="s">"Product 1 description"</span><span class="p">,</span>
            <span class="n">discountDescription</span> <span class="o">=</span> <span class="s">"Volume discount"</span><span class="p">,</span>
            <span class="n">quantity</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
            <span class="n">quantityUnit</span> <span class="o">=</span> <span class="s">"pcs"</span><span class="p">,</span>
            <span class="n">unitPrice</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span>
            <span class="n">discountPrice</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span>
            <span class="n">vatPercent</span> <span class="o">=</span> <span class="mi">2500</span><span class="p">,</span>
            <span class="n">amount</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span>
            <span class="n">vatAmount</span> <span class="o">=</span> <span class="mi">250</span>
        <span class="p">)</span>
    <span class="p">]</span>
<span class="p">)</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<ul>
  <li>① payeeId and payeeReference are required fields, but default to the empty string. The assumption here is that your Merchant Backend will override the values set here. If your system works better with the Mobile Client setting them instead, they are available here also.</li>
</ul>

<p>To start a payment, create a <code class="language-html highlighter-rouge">SwedbankPaySDKController</code> and display it. The payment process starts as soon as the <code class="language-html highlighter-rouge">SwedbankPaySDKController</code> is visible.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td>
<td class="rouge-code"><pre><span class="n">val</span> <span class="n">paymentController</span> <span class="o">=</span> <span class="kt">SwedbankPaySDKController</span><span class="p">(</span>
    <span class="nv">configuration</span><span class="p">:</span> <span class="n">swedbankPayConfig</span><span class="p">,</span>
    <span class="nv">consumer</span><span class="p">:</span> <span class="n">consumer</span><span class="p">,</span>
    <span class="nv">paymentOrder</span><span class="p">:</span> <span class="n">paymentOrder</span>
<span class="p">)</span>

<span class="nf">present</span><span class="p">(</span><span class="n">paymentController</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nv">completion</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
<span class="c1">// There are, of course many other ways of displaying a view controller</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p>To observe the payment process, set a <code class="language-html highlighter-rouge">delegate</code> to the <code class="language-html highlighter-rouge">SwedbankPaySDKController</code>. When the delegate is informed that the payment process is finished, you should remove the <code class="language-html highlighter-rouge">SwedbankPaySDKController</code> and inform the user of the result.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td>
<td class="rouge-code"><pre><span class="n">paymentController</span><span class="o">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="k">self</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td>
<td class="rouge-code"><pre><span class="kd">func</span> <span class="nf">paymentComplete</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">dismiss</span><span class="p">(</span><span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nv">completion</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
    <span class="c1">// Check payment status from your backend</span>
    <span class="c1">// Notify user</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">paymentCanceled</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">dismiss</span><span class="p">(</span><span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nv">completion</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
    <span class="c1">// Notify user</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">paymentFailed</span><span class="p">(</span><span class="nv">failureReason</span><span class="p">:</span> <span class="kt">SwedbankPaySDKController</span><span class="o">.</span><span class="kt">FailureReason</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">dismiss</span><span class="p">(</span><span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nv">completion</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
    <span class="c1">// Notify user</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p>Note that checking the payment status after completion is outside the scope of the Mobile SDK. Your backend should collect any information it needs to perform this check when it services the request to the <a href="merchant-backend#payment-orders-endpoint">Payment Orders endpoint</a> made by the <code class="language-html highlighter-rouge">SwedbankPaySDKController</code>.</p>
    
      <h2 id="problems">
        
        
          Problems <a href="#problems" class="header-anchor"></a>
        
        
      </h2>

<p>If errors are encountered in the payment process, the Merchant Backend is expected to respond with a <a href="https://tools.ietf.org/html/rfc7807">Problem Details for HTTP APIs (RFC 7807)</a> message. If the payment fails because of a problem, the <code class="language-html highlighter-rouge">failureReason</code> argument of the <code class="language-html highlighter-rouge">paymentFailed</code> delegate call will have a value of <code class="language-html highlighter-rouge">.Problem</code>, the associated value being the problem as parsed from the response. The iOS SDK will parse any RFC 7807 problem, but it has specialized data types for known problem types, namely the <a href="/home/technical-information#problems">Common Problems</a> and the <a href="merchant-backend#problems">Merchand Backend Problems</a>.</p>

<p>[Development note: the problem parsing is broken as of version 0.1.23, and will not create the correct values for unexpected responses.]</p>

<p>Problems are expressed in Swift as <code class="language-html highlighter-rouge">enum</code>s with associated values, representing a hierarchy of problem types. At the root of the hierarchy is <code class="language-html highlighter-rouge">enum SwedbankPaySDK.Problem</code>, with two cases: <code class="language-html highlighter-rouge">.Client</code> and <code class="language-html highlighter-rouge">.Server</code>. A <code class="language-html highlighter-rouge">.Client</code> problem is one caused by client behaviour, and is to be fixed by changing the request made to the server. Generally, a <code class="language-html highlighter-rouge">.Client</code> problem is a programming error, with the possible exception of <code class="language-html highlighter-rouge">.Client(.MobileSDK(.Unauthorized))</code>. A <code class="language-html highlighter-rouge">.Server</code> problem is one caused by a malfunction or lack of service in the server evironment. A <code class="language-html highlighter-rouge">.Server</code> problem is fixed by correcting the behaviour of the malfunctioning server, or simply trying again later.</p>

<p>Both <code class="language-html highlighter-rouge">.Client</code> and <code class="language-html highlighter-rouge">.Server</code> have an associated value, of type <code class="language-html highlighter-rouge">SwedbankPaySDK.ClientProblem</code> and <code class="language-html highlighter-rouge">SwedbankPaySDK.ServerProblem</code> respectively, that further classify the problems as <code class="language-html highlighter-rouge">.MobileSDK</code>, <code class="language-html highlighter-rouge">.SwedbankPay</code>, <code class="language-html highlighter-rouge">.Unknown</code> or <code class="language-html highlighter-rouge">.UnexpectedContent</code>. <code class="language-html highlighter-rouge">MobileSDK</code> problems are ones with <a href="merchant-backend#problems">Merchant Backend problem types</a>, while <code class="language-html highlighter-rouge">SwedbankPay</code> problems have <a href="/home/technical-information#problems">Swedbank Pay API problem types</a>. <code class="language-html highlighter-rouge">Unknown</code> problems are of types that the SDK has no knowledge of. <code class="language-html highlighter-rouge">.UnexpectedContent</code> problems are not proper RFC 7807 problems, but are emitted when the SDK cannot make sense of the response it received from the backend.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre></td>
<td class="rouge-code"><pre><span class="kd">func</span> <span class="nf">paymentFailed</span><span class="p">(</span><span class="nv">failureReason</span><span class="p">:</span> <span class="kt">SwedbankPaySDKController</span><span class="o">.</span><span class="kt">FailureReason</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// remove SwedbankPaySDKController</span>

    <span class="k">switch</span> <span class="n">failureReason</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="kt">Problem</span><span class="p">(</span><span class="o">.</span><span class="kt">Client</span><span class="p">(</span><span class="o">.</span><span class="kt">MobileSDK</span><span class="p">(</span><span class="o">.</span><span class="kt">Unauthorized</span><span class="p">(</span><span class="k">let</span> <span class="nv">message</span><span class="p">,</span> <span class="n">_</span><span class="p">)))):</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Credentials invalidated: </span><span class="se">\(</span><span class="n">message</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>

        <span class="k">case</span> <span class="o">.</span><span class="kt">Problem</span><span class="p">(</span><span class="o">.</span><span class="kt">Client</span><span class="p">(</span><span class="o">.</span><span class="kt">MobileSDK</span><span class="p">)):</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Other client error at merchant backend"</span><span class="p">)</span>

        <span class="k">case</span> <span class="o">.</span><span class="kt">Problem</span><span class="p">(</span><span class="o">.</span><span class="kt">Client</span><span class="p">(</span><span class="o">.</span><span class="kt">SwedbankPay</span><span class="p">(</span><span class="k">let</span> <span class="nv">problem</span><span class="p">)))</span> <span class="k">where</span> <span class="n">problem</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="o">.</span><span class="kt">InputError</span><span class="p">:</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Payment rejected by Swedbank Pay: </span><span class="se">\(</span><span class="n">problem</span><span class="o">.</span><span class="n">detail</span><span class="se">)</span><span class="s">; Fix: </span><span class="se">\(</span><span class="n">problem</span><span class="o">.</span><span class="n">action</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>

        <span class="k">case</span> <span class="o">.</span><span class="kt">Problem</span><span class="p">(</span><span class="o">.</span><span class="kt">Client</span><span class="p">(</span><span class="o">.</span><span class="kt">Unknown</span><span class="p">(</span><span class="k">let</span> <span class="nv">problem</span><span class="p">))):</span>
            <span class="k">if</span> <span class="n">problem</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s">"https://example.com/problems/special-problem"</span> <span class="p">{</span>
                <span class="nf">print</span><span class="p">(</span><span class="s">"Special problem occurred: </span><span class="se">\(</span><span class="n">problem</span><span class="o">.</span><span class="n">detail</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nf">print</span><span class="p">(</span><span class="s">"Unexpected problem: </span><span class="se">\(</span><span class="n">problem</span><span class="o">.</span><span class="n">raw</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
            <span class="p">}</span>

        <span class="k">case</span> <span class="o">.</span><span class="kt">Problem</span><span class="p">(</span><span class="o">.</span><span class="kt">Server</span><span class="p">(</span><span class="o">.</span><span class="kt">MobileSDK</span><span class="p">(</span><span class="o">.</span><span class="kt">BackendConnectionTimeout</span><span class="p">(</span><span class="k">let</span> <span class="nv">message</span><span class="p">,</span> <span class="n">_</span><span class="p">)))):</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Swedbank Pay timeout: </span><span class="se">\(</span><span class="n">message</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>

        <span class="k">case</span> <span class="o">.</span><span class="kt">Problem</span><span class="p">(</span><span class="o">.</span><span class="kt">Server</span><span class="p">(</span><span class="o">.</span><span class="kt">SwedbankPay</span><span class="p">(</span><span class="k">let</span> <span class="nv">problem</span><span class="p">)))</span> <span class="k">where</span> <span class="n">problem</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="o">.</span><span class="kt">SystemError</span><span class="p">:</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Generic server error at Swedbank Pay: </span><span class="se">\(</span><span class="n">problem</span><span class="o">.</span><span class="n">detail</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>

        <span class="k">default</span><span class="p">:</span>
            <span class="k">break</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>
    
      <h2 id="payment-url-and-external-applications">
        
        
          Payment URL and External Applications <a href="#payment-url-and-external-applications" class="header-anchor"></a>
        
        
      </h2>

<p>The payment process may involve navigating to third-party web pages, or even launching external applications. To resume processing the payment in the payment menu, each payment order must have a <a href="/checkout/payment-menu#payment-url">Payment Url</a>. Let us now discuss how that payment url is used in the iOS environment. In any case, using the convenience constructors for <code class="language-html highlighter-rouge">SwedbankPaySDK.PaymentOrderUrls</code> is recommended; they will generate a unique payment url, which will be routed to the application in all cases, assuming the application and the merchant backend are configured correctly.</p>

<p><code class="language-html highlighter-rouge">SwedbankPaySDKController</code> internally uses a <code class="language-html highlighter-rouge">WKWebView</code>, and in many cases third-party pages can be opened inside that web view. In these cases the SDK can intercept the navigation to the payment url and reload the payment menu without further setup. Unfortunately, our testing has revealed that some web pages used in confirmation flows are incompatible with being opened in a web view. Because of these cases, <code class="language-html highlighter-rouge">SwedbankPaySDKController</code> will only open known-good pages internally, and will open other pages in Safari instead. The SDK contains a list of domain names of pages tested to work in the web view. You can also specify your own list of domains, and there are debugging features available for testin unknown pages in the web view. Pull requests updating the list of good domains in the SDK are welcome.</p>

<pre><code class="language-mermaid">sequenceDiagram
    participant SDK
    participant Web as Web View
    participant Safari

    Web -&gt;&gt; SDK: Navigate to third-party web page
    SDK -&gt;&gt; SDK: Check if page is in list of good domains
    alt Domain is good
        SDK -&gt;&gt; Web: Allow navigation
        Web -&gt;&gt; Web: Load third-party page
    else Domain is not good
        SDK -&gt;&gt; Web: Cancel navigation
        SDK -&gt;&gt; Safari: Open third-party page
    end
</code></pre>

<p>Returning to the payment menu from inside the web view is simple: detect the navigation and override it to reload the payment menu instead.</p>

<pre><code class="language-mermaid">sequenceDiagram
    participant Page as 3rd Party Page
    participant Web as Web View
    participant SDK

    Page -&gt;&gt; Web: Navigate to payment url
    Web -&gt;&gt; SDK: Navigate to payment url
    SDK -&gt;&gt; Web: Cancel navigation
    SDK -&gt;&gt; SDK: Reload payment menu
</code></pre>

<p>Returning to the payment menu from Safari is more involved. The merchant backend page <a href="merchant-backend#ios-payment-url-helper">explains</a> the process from the backend perspective; let us now view it from the iOS side.</p>

<p>When the third party page wants to return to the payment menu, it navigates to the payment url. As this navigation is happening inside Safari, the payment url must provide some meaningful respose when Safari makes the request. However, even before that happens, consider the case where the payment url is a <a href="https://developer.apple.com/documentation/uikit/inter-process_communication/allowing_apps_and_websites_to_link_to_your_content">universal link</a> for the application using the SDK. Assuming the <a href="https://developer.apple.com/documentation/uikit/inter-process_communication/allowing_apps_and_websites_to_link_to_your_content#3001753">conditions</a> for opening universal links in the registered application are met, then Safari will never actually request the payment url, but will instead open the application, giving it the universal link in its Application Delegate’s <a href="https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1623072-application"><code class="language-html highlighter-rouge">application(_:continue:restorationHandler:)</code></a> method. Recall that we enabled universal links for the backend url’s domain <a href="#url-scheme-and-associated-domain">in the installation instructions</a>. Note that the merchant backend must also be properly configured to <a href="merchant-backend#apple-app-site-association">enable univeral links</a>.</p>

<p>The application delegate is, of course, squarely in the domain of the application; the SDK cannot hook into it automatically. Therefore, you need to implement the <a href="https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1623072-application"><code class="language-html highlighter-rouge">application(_:continue:restorationHandler:)</code></a> method, and pass control over to the SDK when a Swedbank Pay SDK Payment Url is passed into it. Do this by calling the <code class="language-html highlighter-rouge">SwedbankPaySDK.continue(userActivity:)</code> method.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td>
<td class="rouge-code"><pre>    <span class="kd">func</span> <span class="nf">application</span><span class="p">(</span>
        <span class="n">_</span> <span class="nv">application</span><span class="p">:</span> <span class="kt">UIApplication</span><span class="p">,</span>
        <span class="k">continue</span> <span class="nv">userActivity</span><span class="p">:</span> <span class="kt">NSUserActivity</span><span class="p">,</span>
        <span class="nv">restorationHandler</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">([</span><span class="kt">UIUserActivityRestoring</span><span class="p">]?)</span> <span class="o">-&gt;</span> <span class="kt">Void</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kt">SwedbankPaySDK</span><span class="o">.</span><span class="nf">continue</span><span class="p">(</span><span class="nv">userActivity</span><span class="p">:</span> <span class="n">userActivity</span><span class="p">)</span>
    <span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<pre><code class="language-mermaid">sequenceDiagram
    participant Page as 3rd Party Page
    participant Safari
    participant App as Application
    participant SDK

    Page -&gt;&gt; Safari: Navigate to payment url
    Safari -&gt;&gt; Safari: Recognize universal link
    Safari -&gt;&gt; App: Bring to foreground
    Safari -&gt;&gt; App: application(application, continue: userActivity, restorationHandler: restorationHandler)
    App -&gt;&gt; SDK: SwedbankPaySDK.continue(userActivity: userActivity)
    SDK -&gt;&gt; SDK: Reload payment menu
</code></pre>

<p>Testing has shown, however, that the navigation to the payment url is not always processed as a universal link, and is instead opened in Safari. A major reason for this happening are the conditions placed on routing a universal link to the registered application. A crucial condition to consider is that the navigation must have started from user interaction. It appears that many third party pages involved in verification flows will navigate to the payment url not from user interaction directly, but through e.g. timers. This will, unfortunately, prevent the link from being opened in the application.</p>

<p>As it stands, we need a way to get back to the application even when the payment url is opened in Safari. The simplest way of accomplishing this is to respond with a redirect to a <a href="https://developer.apple.com/documentation/uikit/inter-process_communication/allowing_apps_and_websites_to_link_to_your_content/defining_a_custom_url_scheme_for_your_app">custom scheme url</a>. Doing that will, however, always show an unattractive confirmation alert before the user is directed to the application. Therefore, let us first consider if there is a way to reattempt the universal link navigation, while attempting to maximize the chance of it being routed to the application.</p>

<p>Reviewing the <a href="https://developer.apple.com/documentation/uikit/inter-process_communication/allowing_apps_and_websites_to_link_to_your_content#3001753">conditions</a> for universal links opening in the registered application, we note two things: Firstly, the navigation must originate from user interaction. Thus, opening the payment url in Safari must produce a page with a control the user can interact with, which must trigger a navigation to the payment url. Secondly, the navigation must be to a domain different to the current page. This means that opening the payment url must redirect to a page on a different domain, so that a navigation back to the payment url from that page is given to the application to handle.</p>

<p>As explained on the <a href="merchant-backend#ios-payment-url-helper">mechant backend page</a>, we solve this by having the payment url respond with a redirect response to a page with a link to the payment url (but see below).</p>

<pre><code class="language-mermaid">sequenceDiagram
    participant User
    participant Page as 3rd Party Page
    participant Safari
    participant Merchant as Payment Url Host
    participant Trampoline as Payment Url Trampoline
    participant App as Application
    participant SDK

    Page -&gt;&gt; Safari: Navigate to payment url (at Merchant)
    Safari -&gt;&gt; Merchant: GET &lt;payment url&gt;
    Merchant -&gt;&gt; Safari: 301 Moved Permanently Location: &lt;redirect url&gt;
    Safari -&gt;&gt; Trampoline: GET &lt;redirect url&gt;
    Trampoline -&gt;&gt; Safari: &lt;http&gt;...&lt;a href="&lt;payment url&gt;"&gt;...&lt;/http&gt;
    Safari -&gt;&gt; User: Page with "Back to Application" button
    User -&gt;&gt; Safari: Tap on button

    rect rgba(238, 112, 35, 0.05)
      note left of Safari: Same as direct path
      Safari -&gt;&gt; Safari: Recognize universal link
      Safari -&gt;&gt; App: Bring to foreground
      Safari -&gt;&gt; App: application(application, continue: userActivity, restorationHandler: restorationHandler)
      App -&gt;&gt; SDK: SwedbankPaySDK.continue(userActivity: userActivity)
      SDK -&gt;&gt; SDK: Reload payment menu
    end
</code></pre>

<p>Finally, to prevent the user being stuck in a situation where universal links fail to work despite our efforts, and to help in the development phase where configurations may end up being broken from time to time, we also have a custom scheme fallback. The way this works is that the when the payment url link is tapped on the page where the payment url redirected to, then in that instance the payment url will redirect to a custom scheme url instead. Now this is, of course, more or less impossible to do, so we relax the requirements of the payment url slightly: In addition to the original payment url, the SDK accepts a payment url with any number of additional query parameters added (note that none may be removed or modified, though). This enables us to alter the behaviour of the backend on the “same” payment url.</p>

<p>To forward the custom-scheme payment urls to the SDK, implement the <a href="https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1623112-application"><code class="language-html highlighter-rouge">application(_:open:options:)</code></a> method in your application delegate, and call <code class="language-html highlighter-rouge">SwedbankPaySDK.open(url: url)</code> to let the SDK handle the url.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td>
<td class="rouge-code"><pre>    <span class="kd">func</span> <span class="nf">application</span><span class="p">(</span>
        <span class="n">_</span> <span class="nv">app</span><span class="p">:</span> <span class="kt">UIApplication</span><span class="p">,</span>
        <span class="kd">open</span> <span class="nv">url</span><span class="p">:</span> <span class="kt">URL</span><span class="p">,</span>
        <span class="nv">options</span><span class="p">:</span> <span class="p">[</span><span class="kt">UIApplication</span><span class="o">.</span><span class="kt">OpenURLOptionsKey</span> <span class="p">:</span> <span class="kt">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">[:]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kt">SwedbankPaySDK</span><span class="o">.</span><span class="nf">open</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span>
    <span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<pre><code class="language-mermaid">sequenceDiagram
    participant User
    participant Page as 3rd Party Page
    participant Safari
    participant Merchant as Payment Url Host
    participant Trampoline as Payment Url Trampoline
    participant App as Application
    participant SDK

    Page -&gt;&gt; Safari: Navigate to payment url (at Merchant)
    Safari -&gt;&gt; Merchant: GET &lt;payment url&gt;
    Merchant -&gt;&gt; Safari: 301 Moved Permanently Location: &lt;redirect url&gt;
    Safari -&gt;&gt; Trampoline: GET &lt;redirect url&gt;
    Trampoline -&gt;&gt; Safari: &lt;http&gt;...&lt;a href="&lt;payment url with fallback flag&gt;"&gt;...&lt;/http&gt;
    Safari -&gt;&gt; User: Page with "Back to Application" button
    User -&gt;&gt; Safari: Tap on button
    Safari -&gt;&gt; Merchant: GET &lt;payment url with fallback flag&gt;
    Merchant -&gt;&gt; Safari: 301 Moved Permanently Location: &lt;custom scheme url&gt;
    Safari -&gt;&gt; User: Confirmation Dialog
    User -&gt;&gt; Safari: Accept App Launch
    Safari -&gt;&gt; App: Bring to foreground
    Safari -&gt;&gt; App: application(application, open: url)
    App -&gt;&gt; SDK: SwedbankPaySDK.open(url: url)
    SDK -&gt;&gt; SDK: Reload payment menu
</code></pre>

<nav class="iterator d-flex">
    
    <a class="mr-auto btn btn-guiding" role="button" rel="prev" href="android">
        Back: Android
    </a>
    

    
    <a class="ml-auto btn btn-executive" role="button" rel="next" href="process-diagrams">
        Next: Process Diagrams
    </a>
    
</nav>
                            </article>
                        </div>
                    </main>
                </div>
            </div>

            <footer class="page-footer">
                <p class="page-footer-rights">© Swedbank Pay</p>
            </footer>
        </div>

        <script src="https://design.swedbankpay.com/v/4.7.0/scripts/dg.js"></script>
        <script src="/assets/js/swedbank-pay-design-guide-theme.js"></script>
        <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-156582708-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-156582708-1');
</script>

    </body>

</html>
